"use strict";if(!String.prototype.padStart){String.prototype.padStart=function padStart(targetLength,padString){targetLength=targetLength>>0;padString=String(typeof padString!=="undefined"?padString:" ");if(this.length>targetLength){return String(this)}else{targetLength=targetLength-this.length;if(targetLength>padString.length){padString+=padString.repeat(targetLength/padString.length)}return padString.slice(0,targetLength)+String(this)}}}if(!String.prototype.repeat){String.prototype.repeat=function(count){'use strict';if(this==null){throw new TypeError("can't convert "+this+" to object")}var str=""+this;count=+count;if(count!=count){count=0}if(count<0){throw new RangeError("repeat count must be non-negative")}if(count==Infinity){throw new RangeError("repeat count must be less than infinity")}count=Math.floor(count);if(str.length==0||count==0){return""}if(str.length*count>=1<<28){throw new RangeError("repeat count must not overflow maximum string size")}var maxCount=str.length*count;count=Math.floor(Math.log(count)/Math.log(2));while(count){str+=str;count--}str+=str.substring(0,maxCount-str.length);return str}}
"use strict";var primaryPath=window.primaryPath;var secondaryPath=window.secondaryPath;function imgError(image,imgName){image.onerror="";image.src="".concat(secondaryPath).concat(imgName);return true}
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var LeftView;(function(LeftView){LeftView["Results"]="R";LeftView["Round"]="O";LeftView["PrivateScore"]="H";LeftView["Segment"]="S";LeftView["CrossTable"]="C";LeftView["IndividualClassification"]="I";LeftView["IndividualClassificationSegment"]="J"})(LeftView||(LeftView={}));;var possibleLeftViews=Object.keys(LeftView).map(function(c){return LeftView[c]});function leftViewFromValue(letter){var keys=Object.keys(LeftView).filter(function(x){return LeftView[x]===letter});return keys.length>0?LeftView[keys[0]]:null}var MobileView;(function(MobileView){MobileView["Results"]="R";MobileView["Round"]="O";MobileView["PrivateScore"]="H";MobileView["Segment"]="S";MobileView["CrossTable"]="C";MobileView["IndividualClassification"]="I";MobileView["IndividualClassificationSegment"]="J";MobileView["Board"]="B"})(MobileView||(MobileView={}));;var possibleMobileViews=Object.keys(MobileView).map(function(c){return MobileView[c]});function mobileViewFromValue(letter){var keys=Object.keys(MobileView).filter(function(x){return MobileView[x]===letter});return keys.length>0?MobileView[keys[0]]:null}var viewsHavingButtons=[LeftView.Results,LeftView.PrivateScore,LeftView.Round,LeftView.IndividualClassification,LeftView.CrossTable];var linkFollowedLength=3;var linkLeftTabLength=1;var linkMobileTabLength=1;var linkParticipantLength=3;var linkBoardLength=3;var linkSessionLength=3;var linkRoundLength=3;var linkSegmentLength=3;var linkTableLength=6;var linkFollowedPosition=1;var linkLeftTabPosition=linkFollowedPosition+linkBoardLength;var linkMobileTabPosition=linkLeftTabPosition+linkLeftTabLength;var linkParticipantPosition=linkMobileTabPosition+linkMobileTabLength;var linkBoardPosition=linkParticipantPosition+linkParticipantLength;var linkSessionPosition=linkBoardPosition+linkBoardLength;var linkRoundPosition=linkSessionPosition+linkSessionLength;var linkSegmentPosition=linkRoundPosition+linkRoundLength;var linkTablePosition=linkSegmentPosition+linkSegmentLength;var HashData=function(){function HashData(followed,leftView,mobileView,participant,board,session,round,segment,table){_classCallCheck(this,HashData);this.followed=followed||0;this.leftView=leftView||LeftView.Results;this.mobileView=mobileView||MobileView.Results;this.participant=participant||0;this.board=board||1;this.session=session||1;this.round=round||1;this.segment=segment||0;this.table=table||""}_createClass(HashData,[{key:"getLink",value:function getLink(){return"#"+this.followed.toString().padStart(3,"0")+this.leftView+this.mobileView+this.participant.toString().padStart(3,"0")+this.board.toString().padStart(3,"0")+this.session.toString().padStart(3,"0")+this.round.toString().padStart(3,"0")+this.segment.toString().padStart(3,"0")+this.table.padStart(6,"0")}},{key:"withFollowedChanged",value:function withFollowedChanged(followed){return new HashData(followed,this.leftView,this.mobileView,this.participant,this.board,this.session,this.round,this.segment,this.table)}},{key:"withLeftViewChanged",value:function withLeftViewChanged(leftView){return new HashData(this.followed,leftView,this.mobileView,this.participant,this.board,this.session,this.round,this.segment,this.table)}},{key:"withMobileViewChanged",value:function withMobileViewChanged(mobileView){return new HashData(this.followed,this.leftView,mobileView,this.participant,this.board,this.session,this.round,this.segment,this.table)}},{key:"withParticipantChanged",value:function withParticipantChanged(participant){return new HashData(this.followed,this.leftView,this.mobileView,participant,this.board,this.session,this.round,this.segment,this.table)}},{key:"withBoardChanged",value:function withBoardChanged(board){return new HashData(this.followed,this.leftView,this.mobileView,this.participant,board,this.session,this.round,this.segment,this.table)}},{key:"withSessionChanged",value:function withSessionChanged(session){return new HashData(this.followed,this.leftView,this.mobileView,this.participant,this.board,session,this.round,this.segment,this.table)}},{key:"withRoundChanged",value:function withRoundChanged(round){return new HashData(this.followed,this.leftView,this.mobileView,this.participant,this.board,this.session,round,this.segment,this.table)}},{key:"withSegmentChanged",value:function withSegmentChanged(segment){return new HashData(this.followed,this.leftView,this.mobileView,this.participant,this.board,this.session,this.round,segment,this.table)}},{key:"withTableChanged",value:function withTableChanged(table){return new HashData(this.followed,this.leftView,this.mobileView,this.participant,this.board,this.session,this.round,this.segment,table)}}],[{key:"create",value:function create(leftView,mobileView,board,session,round){return new HashData(0,leftView,mobileView,0,board,session,round,0,"")}},{key:"parse",value:function parse(hash){var followed=parseInt(hash.substr(linkFollowedPosition,linkFollowedLength));if(isNaN(followed)){followed=0}var leftView=leftViewFromValue(hash.substr(linkLeftTabPosition,linkLeftTabLength));if(leftView===null){leftView=LeftView.Results}var mobileView=mobileViewFromValue(hash.substr(linkMobileTabPosition,linkMobileTabLength));if(mobileView===null){mobileView=MobileView.Results}var participant=parseInt(hash.substr(linkParticipantPosition,linkParticipantLength));if(isNaN(participant)){participant=0}var board=parseInt(hash.substr(linkBoardPosition,linkBoardLength));if(isNaN(board)){if(settings.LiveResults){board=settings.BoardsNumbers.length===0?1:settings.BoardsNumbers[settings.BoardsNumbers.length-1]}else board=settings.BoardsNumbers.length===0?1:settings.BoardsNumbers[0]}var session=parseInt(hash.substr(linkSessionPosition,linkSessionLength));var round=parseInt(hash.substr(linkRoundPosition,linkRoundLength));if(isNaN(session)||isNaN(round)){if(settings.AvailableRoundResults.length===0)session=round=1;else if(settings.LiveResults){round=settings.LastPlayedRound;session=settings.LastPlayedRoundSession}else{round=settings.AvailableRoundResults[0].Round;session=settings.AvailableRoundResults[0].Session}}var segment=parseInt(hash.substr(linkSegmentPosition,linkSegmentLength));if(isNaN(segment)){segment=0}var table=hash.substr(linkTablePosition,linkTableLength).replace(/^0+/g,"");return new HashData(followed,leftView,mobileView,participant,board,session,round,segment,table)}},{key:"parseWindowHash",value:function parseWindowHash(){var hash=window.location.hash;return this.parse(hash)}}]);return HashData}();var hashData=new HashData;function setHashFromWindowHash(){hashData=HashData.parseWindowHash()}function setHashData(newHashData){hashData=newHashData;window.location.hash=hashData.getLink()}
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var Language=function(){function Language(json){_classCallCheck(this,Language);for(var prop in json){if(Object.prototype.hasOwnProperty.call(json,prop)){this[prop]=json[prop]}}}_createClass(Language,[{key:"updateStrings",value:function updateStrings(){$("#navLinkR").text(this.results);$("#navLinkH").text(this.privateScores);$("#navLinkB").text(this.boards);$("#navLinkO").text(this.roundResults);$("#navLinkC").text(this.crossTable);$("#followButton").text(this.follow);$("#unfollowButton").text(this.unfollow);$("#followModalButton").text(this.follow);$("#unfollowModalButton").text(this.unfollow);$("#vpTableModalTitle").text(this.vpTableLink);$("#fetchButtonInput").text(this.fetchBoardButton);$("#followInput").attr("placeholder",this.followPlaceholder);$("#followInputModal").attr("placeholder",this.followPlaceholder);$("#historyInput").attr("placeholder",this.followPlaceholder);$("#fetchBoardInput").attr("placeholder",this.fetchBoardPlaceholder);$("#historyButton").text(this.showHistory);$("#roundHL").text(this.roundHL);$("#opponentHL").text(this.opponentHL);$("#boardHL").text(this.boardHL);$("#lineHL").text(this.lineHL);$("#contractHL").text(this.contractHL);$("#declarerHL").text(this.declarerHL);$("#leadHL").text(this.leadHL);$("#tricksHL").text(this.tricksHL);$("#scoreHL").text(this.scoreHL);$("#resultHL").text(this.resultHL);$("#currentResultHLText").text(this.currentResultHL);$("#vpTableLinkHLText").text(this.vpTableLink);$("#boardHS").text(this.boardHS);$("#lineHS").text(this.lineHS);$("#contractHS").text(this.contractHS);$("#declarerHS").text(this.declarerHS);$("#leadHS").text(this.leadHS);$("#tricksHS").text(this.tricksHS);$("#scoreHS").text(this.scoreHS);$("#impHL").text(this.sum);$("#impHS").text(this.sum);$("#adjHL").text(this.adjHL);$("#adjHS").text(this.adjHS);$("#currentResultHSText").text(this.currentResultHS);$("#vpTableLinkHSText").text(this.vpTableLinkShort);$("#placeColumn").text(this.placeColumn);$("#pairColumn").text(this.pairColumn);$("#playersColumn").text(this.playersColumn);$("#districtColumn").text(this.districtColumn);$("#infoColumn").text(this.infoColumn);$("#rankColumn").text(this.rankColumn);$("#clubColumn").text(this.clubColumn);$("#noteColumn").text(this.noteColumn);$("#scoreColumnText").text(this.scoreColumn);$("#vpTableLinkText").text(this.vpTableLink);$("#classificationColumn").text(this.classificationColumn);$("#congressColumn").text(this.congressColumn);$("#descriptionColumn").text(this.descriptionColumn);$("#rewardColumn").text(this.rewardColumn);$("#carryOverColumn").text(this.carryOverColumn);$("#carryOverI").text(this.carryOverColumn);$("#sessionResultColumn").text(this.sessionResultColumn);$("#sessionResultI").text(this.sessionResultColumn);$("#nsBL").text(this.nsBL);$("#ewBL").text(this.ewBL);$("#contractBL").text(this.contractBL);$("#declarerBL").text(this.declarerBL);$("#leadBL").text(this.leadBL);$("#tricksBL").text(this.tricksBL);$("#scoreBL").text(this.scoreBL);$("#resultBL").text(this.resultBL);$("#nsBS").text(this.nsBS);$("#ewBS").text(this.ewBS);$("#contractBS").text(this.contractBS);$("#declarerBS").text(this.declarerBS);$("#leadBS").text(this.leadBS);$("#tricksBS").text(this.tricksBS);$("#scoreBS").text(this.scoreBS);$("#resultBS").text(this.resultBS);$("#scoreNsBL").text(this.scoreNsBL);$("#scoreEwBL").text(this.scoreEwBL);$("#resultNsBL").text(this.resultNsBL);$("#resultEwBL").text(this.resultEwBL);$("#tableBL").text(this.tableBL);$("#hostBL").text(this.hostBL);$("#guestBL").text(this.guestBL);$("#tableBS").text(this.tableBS);$("#hostBS").text(this.hostBS);$("#guestBS").text(this.guestBS);$("#oTableColumn").text(this.oTableColumn);$("#followModalTitle").text(this.followModalTitle);$("#liveResultsText").text(this.liveResultsText);$("#copyToClipboardTooltip").attr("title",this.copyToClipboard);$("#historyFormHeader").text(this.historyFormHeader);$("#stagesNavbarHeader").text(this.stagesNavbarHeader);$("#tcWebpage").text(this.tcWebpage);$("#tcWebpage").attr("href","http://"+this.tcWebpage);$("#contractOSL").text(this.contractHL);$("#declarerOSL").text(this.declarerHL);$("#leadOSL").text(this.leadHL);$("#tricksOSL").text(this.tricksHL);$("#scoreOSL").text(this.scoreHL);$("#boardSL").text(this.boardHL);$("#boardSS").text(this.boardHL);$("#contractCSL").text(this.contractHL);$("#declarerCSL").text(this.declarerHL);$("#leadCSL").text(this.leadHL);$("#tricksCSL").text(this.tricksHL);$("#scoreCSL").text(this.scoreHL);$("#impsSL").text(this.resultHL);$("#imps2SL").text(this.resultHL);$("#scoreNsOSL").text(this.nsBL);$("#scoreEwOSL").text(this.ewBL);$("#scoreNsCSL").text(this.nsBL);$("#scoreEwCSL").text(this.ewBL);$("#impsNsSL").text(this.nsBL);$("#impsEwSL").text(this.ewBL);$("#openSL").text(this.openCaps);$("#closedSL").text(this.closedCaps);$("#openSS").text(this.openCaps);$("#closedSS").text(this.closedCaps);$("#oVpColumn").text(this.resultHL);$("#oPlaceColumn").text(this.placeColumn);$("#dropdownRosterButton").text(this.roster);$("#rosterIdColumn").text(this.id);$("#rosterPlayerColumn").text(this.playersColumn);$("#rosterDistrictColumn").text(this.districtColumn);$("#rosterRankColumn").text(this.rankColumn);$("#rosterInfoColumn").text(this.infoColumn);$("#rosterClubColumn").text(this.clubColumn);$("#rosterNoteColumn").text(this.noteColumn);$("#placeI").text(this.placeColumn);$("#personI").text(this.playersColumn);$("#resultI").text(this.resultBL);$("#placeJ").text(this.placeColumn);$("#positionJ").text(this.tableBL);$("#pairJ").text(this.pairColumn);$("#teamJ").text(this.team);$("#resultJ").text(this.resultBL);$("#oImpColumn").text(this.sum);$("#currentRoundRoundText").text(this.roundCaps);$("#currentRoundSessionText").text(this.sessionCaps);$("#currentRoundFinishedText").text(this.finishedCaps);$("#currentRoundRunningText").text(this.runningCaps);$("#contentHnextSittingPositionText").text(this.nextSittingPosition);$("#contentHnextSittingNextSittingSessionText").text(this.session);$("#contentHnextSittingNextSittingRoundText").text(this.round);$("#playerColumn").text(this.playersColumn);$("#resultColumn").text(this.resultBL);$("#nextRemovedColumn").text(this.nextRemovedColumn);$("#countedColumn").text(this.countedColumn)}}]);return Language}();var defaultLanguage;var language;function setLanguage(lang){try{if(lang!==null)localStorage.setItem("languageTC",lang);else{var langNow=localStorage.getItem("languageTC");if(langNow==="undefined"||langNow===null)localStorage.setItem("languageTC",defaultLanguage)}lang=localStorage.getItem("languageTC")}catch(error){if(lang===null)lang=defaultLanguage}return $.getJSON("language/"+lang+".json").done(function(json){language=new Language(json);language.updateStrings()})["catch"](function(){return setLanguage(defaultLanguage)})}function setDefaultLanguage(language){defaultLanguage=language}
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Settings=function Settings(json){_classCallCheck(this,Settings);for(var prop in json){if(Object.prototype.hasOwnProperty.call(json,prop)){this[prop]=json[prop]}}};var settings;function loadSettings(){var settingsJson="./settings.json";return $.getJSON(settingsJson).done(function(json){settings=new Settings(json);setDefaultLanguage(settings.DefaultLanguage);document.title=settings.FullName;$("#pcHeader").html(settings.HtmlHeader);$("#mobileHeader").html(settings.HtmlMobileHeader);try{eval(settings.JavaScriptToRun)}catch(e){console.log("Error in custom JS script! "+e.message)}$("#programVersion").html(settings.ProgramVersion);$("#generatedTime").html(settings.TimeCreated)})}
"use strict";function setTdData(settings){if(wellDefined(settings.TdFirstName)||wellDefined(settings.TdLastName)){$("#tdInfo").removeClass("d-none");var td="".concat(settings.TdFirstName," ").concat(settings.TdLastName);if(wellDefined(settings.TdId)){td="<a class=\"clickable\" target=\"_blank\""+"href=\"https://msc.com.pl/cezar/?p=21&pid=".concat(settings.TdId,"\">")+td+"</a>"}var tournamentDirectedBy=settings.TdMale?language.tournamentDirectedByMale:language.tournamentDirectedByFemale;$("#tdName").html("".concat(tournamentDirectedBy," ").concat(td));if(wellDefined(settings.TdEmail)){$("#tdMail").removeClass("d-none");$("#tdMail").attr("href","mailto:".concat(settings.TdEmail))}else{$("#tdMail").addClass("d-none")}}else{$("#tdInfo").addClass("d-none")}}
"use strict";var justStartedFollowing=false;function setUpSendFormOnEnter(){$("form").on("keyup keypress",function(e){var keyCode=e.keyCode||e.which;if(keyCode===13){e.preventDefault()}});$("#historyInput").keyup(function(event){if(event.keyCode===13){$("#historyButton").click();this.blur()}});$("#followInput").keyup(function(event){if(event.keyCode===13){$("#followButton").click();this.blur()}});$("#followInputModal").keyup(function(event){if(event.keyCode===13){$("#followModalButton").click();this.blur()}})}function highlightFollowed(){$("tr[data-participants*='|".concat(hashData.followed,"|']")).addClass("table-primary")}function isElementInViewport(element){var rect=element.getBoundingClientRect();return rect.top>=0&&rect.bottom<=$(window).height()}function queryToParticipant(query){if(query<1000){if(settings.ParticipantNumers.indexOf(query)!==-1)return query}else{if(query in playerToParticipant)return playerToParticipant[query]}return-1}function followPlayer(callerId){var query=document.getElementById(callerId).value;var participant=queryToParticipant(Number(query));if(participant===-1){alert(language.thisParticipantPlayerDoesNotAppearInTournament);return}$("tr[data-participants*='|".concat(hashData.followed,"|']")).removeClass("table-primary");var newHash=hashData;if(hashData.participant===0){newHash=newHash.withParticipantChanged(participant)}newHash=newHash.withFollowedChanged(participant).withLeftViewChanged(LeftView.Results).withMobileViewChanged(MobileView.Results);justStartedFollowing=true;setHashData(newHash)}function unfollowPlayer(){$("tr[data-participants*='|".concat(hashData.followed,"|']")).removeClass("table-primary");setHashData(hashData.withFollowedChanged(0))}function showPairHistory(number){var newHash=hashData.withParticipantChanged(number).withLeftViewChanged(LeftView.PrivateScore).withMobileViewChanged(MobileView.PrivateScore);setHashData(newHash)}function fetchHistory(){var query=document.getElementById("historyInput").value;var participant=queryToParticipant(Number(query));if(participant===-1){alert(language.thisParticipantPlayerDoesNotAppearInTournament)}else{showPairHistory(participant)};}function showBoard(board){var newHash=hashData.withBoardChanged(board).withMobileViewChanged(MobileView.Board);setHashData(newHash)}function setBoardInput(){var boardNumber=Number(document.getElementById("fetchBoardInput").value);if(!settings.BoardsNumbers.includes(boardNumber)){alert(language.thisBoardDoesNotAppearInTournament);return}showBoard(boardNumber)}
"use strict";var resizeObserver;function onResizeTable($div,$table){var mainTableWidth=$table.width();var divWidth=$div.width();var shouldBeScrollable=mainTableWidth>divWidth;if(shouldBeScrollable){$div.addClass("div-for-sticky-table");$table.addClass("table-sticky")}else{$div.removeClass("div-for-sticky-table");$table.removeClass("table-sticky")}}function onResize(){onResizeTable($("#contentH"),$("#tableH"));onResizeTable($("#contentI"),$("#tableI"));onResizeTable($("#contentO"),$("#tableO"));onResizeTable($("#contentJ"),$("#tableJ"));for(var i=0;i<crossTablesCount;i++){onResizeTable($("#contentC"),$("#tableC".concat(i)))}}function onResizeClassification(){onResizeTable($("#contentR"),$("#mainTable"))}function resizeObserverUnObserve($element){if(typeof ResizeObserver!=="undefined")resizeObserver.unobserve($element[0])}function resizeObserverObserve($element){if(typeof ResizeObserver!=="undefined")resizeObserver.observe($element[0])}function initResizeObserver(){if(typeof ResizeObserver!=="undefined"){resizeObserver=new ResizeObserver(function(event){onResize()});resizeObserverObserve($("#contentH"));resizeObserverObserve($("#tableH"));resizeObserverObserve($("#contentI"));resizeObserverObserve($("#tableI"));resizeObserverObserve($("#contentJ"));resizeObserverObserve($("#tableJ"));resizeObserverObserve($("#contentO"));resizeObserverObserve($("#tableO"));resizeObserverObserve($("#contentC"));$(window).resize(onResize)}}function initResizeClassification(){if(typeof ResizeObserver!=="undefined"){resizeObserver=new ResizeObserver(function(event){onResizeClassification()});resizeObserverObserve($("#contentR"));resizeObserverObserve($("#mainTable"));$(window).resize(onResizeClassification)}}
"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var dataParticipantNumberAttribute="data-pair-number";var dataSessionNumberAttribute="data-session-number";var dataRoundNumberAttribute="data-round-number";var dataSegmentNumberAttribute="data-segment-number";var dataBoardNumberAttribute="data-board-number";var dataTableAttribute="data-table";function getDataParticipantNumber(node){return parseInt(node.attr(dataParticipantNumberAttribute))}function getDataSessionNumber(node){return parseInt(node.attr(dataSessionNumberAttribute))}function getDataRoundNumber(node){return parseInt(node.attr(dataRoundNumberAttribute))}function getDataSegmentNumber(node){return parseInt(node.attr(dataSegmentNumberAttribute))}function getDataBoardNumber(node){return parseInt(node.attr(dataBoardNumberAttribute))}function getDataTable(node){return node.attr(dataTableAttribute)}function segmentLink(html,session,round,segment,table){return"<a href=\"\" ".concat(dataSessionNumberAttribute,"=\"").concat(session,"\" ").concat(dataRoundNumberAttribute,"=\"").concat(round,"\"")+" ".concat(dataSegmentNumberAttribute,"=\"").concat(segment,"\" ").concat(dataTableAttribute,"=\"").concat(table,"\" class=\"segmentLink clickable\">")+html+"</a>"}function participantNumberLink(html,pairNumber){return"<a href=\"\" ".concat(dataParticipantNumberAttribute,"=\"").concat(pairNumber,"\" class=\"pairNumberLink clickable\">")+html+"</a>"}function butlerFromSegmentLink(html,session,round,segment){return"<a href=\"\" ".concat(dataSessionNumberAttribute,"=\"").concat(session,"\" ").concat(dataRoundNumberAttribute,"=\"").concat(round,"\"")+" ".concat(dataSegmentNumberAttribute,"=\"").concat(segment,"\" class=\"butlerFromSegmentLink clickable\">")+html+"</a>"}function roundResultsLink(html,session,round){var additionalAttribute=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";return"<a href=\"\" ".concat(dataSessionNumberAttribute,"=\"").concat(session,"\" ").concat(dataRoundNumberAttribute,"=\"").concat(round,"\"")+"".concat(additionalAttribute," class=\"roundResultLink clickable\">")+html+"</a>"}function protocolNumberLink(html,protocolNumber){return"<a href=\"\" ".concat(dataBoardNumberAttribute,"=\"").concat(protocolNumber,"\" class=\"boardNumberLink clickable\">")+html+"</a>"}function updateLinks(){shiftBoardsNavigationToBoard(hashData.board);updateLinksLeftTab();updateButtonsLeftTab();updateLinksBoardsNavigation();updateLinksRoundResultsNavigation();updatePairNumberLinks();updateBoardNumberLinks();updateRoundResultsLinks();updateSegmentsLinks();updateButlerFromSegmentLinks()}function updatePairNumberLinks(){$("a.pairNumberLink").each(function(index,value){var node=$(value);var newHash=hashData.withParticipantChanged(getDataParticipantNumber(node)).withLeftViewChanged(LeftView.PrivateScore).withMobileViewChanged(MobileView.PrivateScore);node.attr("href",newHash.getLink())})}function updateSegmentsLinks(){$("a.segmentLink").each(function(index,value){var node=$(value);var newHash=hashData.withSessionChanged(getDataSessionNumber(node)).withRoundChanged(getDataRoundNumber(node)).withSegmentChanged(getDataSegmentNumber(node)).withTableChanged(getDataTable(node)).withLeftViewChanged(LeftView.Segment).withMobileViewChanged(MobileView.Segment);node.attr("href",newHash.getLink())})}function updateButlerFromSegmentLinks(){$("a.butlerFromSegmentLink").each(function(index,value){var node=$(value);var newHash=hashData.withSessionChanged(getDataSessionNumber(node)).withRoundChanged(getDataRoundNumber(node)).withSegmentChanged(getDataSegmentNumber(node)).withLeftViewChanged(LeftView.IndividualClassificationSegment).withMobileViewChanged(MobileView.IndividualClassificationSegment);node.attr("href",newHash.getLink())})}function updateRoundResultsLinks(){$("a.roundResultLink").each(function(index,value){var node=$(value);var newHash=hashData.withSessionChanged(getDataSessionNumber(node)).withRoundChanged(getDataRoundNumber(node)).withLeftViewChanged(LeftView.Round).withMobileViewChanged(MobileView.Round);node.attr("href",newHash.getLink())})}function updateBoardNumberLinks(){$("a.boardNumberLink").each(function(index,value){var node=$(value);var newHash=hashData.withBoardChanged(getDataBoardNumber(node)).withMobileViewChanged(MobileView.Board);node.attr("href",newHash.getLink())})}function updateRoundResultNavigationLink(firstLinkAvailableRoundResultIndex,linkIndex,element){$(element).removeClass("liveResults");$(element).attr("href","");$(element).addClass("disabled");element.innerHTML="";if(settings.AvailableRoundResults.length<=firstLinkAvailableRoundResultIndex+linkIndex)return;var roundResult=settings.AvailableRoundResults[firstLinkAvailableRoundResultIndex+linkIndex];$(element).attr(dataSessionNumberAttribute,roundResult.Session.toString());var html=roundResult.Live&&settings.LiveResults?"<span class=\"badge badge-primary\" style=\"font-size: 100%; min-width: 60%;\">".concat(roundResult.Round,"</span>"):roundResult.Round.toString();element.innerHTML=html;if(roundResult.Live&&settings.LiveResults)$(element).addClass("liveResults");var newHash=hashData.withSessionChanged(roundResult.Session).withRoundChanged(roundResult.Round);$(element).attr("href",newHash.getLink());$(element).removeClass("disabled")}function shiftRoundResultsNavigation(shift){var currentFirstRound=Number($("#beginRoundResultIndicator").html());var currentFirstSession=Number($("#beginRoundResultIndicator").attr(dataSessionNumberAttribute));var availableRoundResultIndex=roundResultIndex(currentFirstSession,currentFirstRound);var newIndex=availableRoundResultIndex+shift;if(newIndex>settings.AvailableRoundResults.length-5){newIndex=settings.AvailableRoundResults.length-5}if(newIndex<0){newIndex=0}$("#roundResultNavUp .boardNav").each(function(index,element){updateRoundResultNavigationLink(newIndex,index,element)});$("#roundResultNavDown .boardNav").each(function(index,element){updateRoundResultNavigationLink(newIndex,index,element)})}function updateLinksRoundResultsNavigation(){shiftRoundResultsNavigation(0)}function shiftRoundResultsNavigationToRound(session,round){var currentFirstRound=Number($("#beginRoundResultIndicator").html());var currentFirstSession=Number($("#beginRoundResultIndicator").attr(dataSessionNumberAttribute));var currentAvailableRoundResultIndex=roundResultIndex(currentFirstSession,currentFirstRound);var newAvailableRoundResultIndex=roundResultIndex(session,round);shiftRoundResultsNavigation(newAvailableRoundResultIndex-currentAvailableRoundResultIndex-2)}function updateBoardNavigationLink(linkIndex,element,newFirstIndex){$(element).addClass("disabled");$(element).attr("href","");if(settings.BoardsNumbers.length<=newFirstIndex+linkIndex)return;var boardNumber=settings.BoardsNumbers[newFirstIndex+linkIndex];element.innerHTML=boardNumber;var newHash=hashData.withBoardChanged(boardNumber);$(element).removeClass("disabled");$(element).attr("href",newHash.getLink())}function shiftBoardsNavigation(shift){var currentFirstBoard=Number($("#tabB_beginBoardIndicator0").html());var currentBoardIndex=settings.BoardsNumbers.indexOf(currentFirstBoard);var newBoardIndex=currentBoardIndex+shift;if(newBoardIndex>settings.BoardsNumbers.length-5){newBoardIndex=settings.BoardsNumbers.length-5}if(newBoardIndex<0){newBoardIndex=0}$(".boardNavUp").each(function(index,value){$(value).find(".boardNav").each(function(index,element){return updateBoardNavigationLink(index,element,newBoardIndex)})});$(".boardNavDown").each(function(index,value){$(value).find(".boardNav").each(function(index,element){return updateBoardNavigationLink(index,element,newBoardIndex)})})}function shiftBoardsNavigationToBoard(board){var currentFirstBoard=Number($("#tabB_beginBoardIndicator0").html());var currentBoardIndex=settings.BoardsNumbers.indexOf(currentFirstBoard);var newBoardIndex=settings.BoardsNumbers.indexOf(board);shiftBoardsNavigation(newBoardIndex-currentBoardIndex-2)}function updateLinksBoardsNavigation(){shiftBoardsNavigation(0)}function updateLinksLeftTab(){var _iterator=_createForOfIteratorHelper(possibleLeftViews),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var view=_step.value;var _elem=$("#navLink"+view);var _newHash=hashData.withLeftViewChanged(view).withMobileViewChanged(view);_elem.attr("href",_newHash.getLink())}}catch(err){_iterator.e(err)}finally{_iterator.f()}var elem=$("#navLinkB");var newHash=hashData.withMobileViewChanged(MobileView.Board);elem.attr("href",newHash.getLink())}function updateButtonsLeftTab(){var _iterator2=_createForOfIteratorHelper(viewsHavingButtons),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var view=_step2.value;var _elem2=$("#navButton"+view);var _newHash2=hashData.withLeftViewChanged(view).withMobileViewChanged(view);_elem2.attr("href",_newHash2.getLink())}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}var elem=$("#navButtonB");var newHash=hashData.withMobileViewChanged(MobileView.Board);elem.attr("href",newHash.getLink())}function showOrHideButtons(){var buttons=4;if(settings.ShowRoundResults){buttons++;$("#navLinkO").removeClass("d-none");$("#navButtonODiv").removeClass("d-none");if(settings.AvailableRoundResults.length===1){$("#roundResultNavUp").addClass("d-none");$("#roundResultNavDown").addClass("d-none")}else{$("#roundResultNavUp").removeClass("d-none");$("#roundResultNavDown").removeClass("d-none")}}else{$("#navLinkO").addClass("d-none");$("#navButtonODiv").addClass("d-none")}if(settings.ShowButler){buttons++;$("#navLinkI").removeClass("d-none");$("#navButtonIDiv").removeClass("d-none")}else{$("#navLinkI").addClass("d-none");$("#navButtonIDiv").addClass("d-none")}if(settings.ShowCrossTable){$("#navLinkC").removeClass("d-none");$("#navButtonCDiv").removeClass("d-none");if(settings.ShowButler&&settings.ShowRoundResults){$("#navButtonHDiv").addClass("d-none")}else{buttons++;$("#navButtonHDiv").removeClass("d-none")}}else{$("#navLinkC").addClass("d-none");$("#navButtonCDiv").addClass("d-none")}$("#buttonsRow>div").removeClass("btnContainer4");$("#buttonsRow>div").removeClass("btnContainer5");$("#buttonsRow>div").removeClass("btnContainer6");$("#buttonsRow>div").addClass("btnContainer".concat(buttons))}function setNavBarActive(){$.each($(".nav-link"),function(index,element){element.classList.remove("active")});if(hashData.leftView===LeftView.Round){$("#navLinkR").addClass("active")}else if(hashData.leftView!==LeftView.Segment&&hashData.leftView!==LeftView.IndividualClassificationSegment){$("navLink".concat(hashData.leftView)).addClass("active")}}
"use strict";function createToolTipHtml(content,text){var contentEscaped=content.replace(/"/g,"'");var result="<span data-toggle=\"tooltip\" data-placement=\"bottom\" data-container=\"body\""+" data-html=\"true\" data-trigger=\"hover\" title=\"".concat(contentEscaped,"\">").concat(text,"</span>");return result}function activateTooltips(){var _this=this;$("[data-toggle=\"tooltip\"]").tooltip();$("[data-toggle=\"tooltip\"]").on("click",function(){$(_this).tooltip("hide")})}function clearTooltips(){$("[data-toggle=\"tooltip\"]").tooltip("dispose")}var playerToParticipant={};function registerPlayerToParticipantMapping(player,participant){if((player._pid.__type==="RealNotregisteredPid:#TournamentStructure"||player._pid.__type==="RealPid:#TournamentStructure")&&player._pid.Number!==0){playerToParticipant[player._pid.Number]=participant.Number}}function getFlagImageHtml(flag){if(flag===null||typeof flag==="undefined")return"";if(flag.CustomFlagPath!==null)return"<img class=\"flag mr-2\" src=\"".concat(flag.CustomFlagPath,"\" height=\"1rem\">");else{var src="".concat(primaryPath,"flags/").concat(flag.CountryNameCode,".png");var onError="imgError(this, 'flags/".concat(flag.CountryNameCode,".png');");return"<img class=\"flag mr-2\" src=\"".concat(src,"\" onerror=\"").concat(onError,"\" height=\"1rem\">")}}function isNullOrWhiteSpace(str){return str===null||typeof str==="undefined"||str.match(/^\s*$/)!==null}function getPlayerHtml(person){var includeBboUsername=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var includeNote=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var includeLink=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if(person===null||typeof person==="undefined"){return""}var settingsUse=typeof settings!=="undefined"?settings:settingsClassification;var player=settingsUse.ShowFirstAndLastName?person._firstName+" "+person._lastName:"";player=getFlagImageHtml(person._flag)+player;if(person._pid.__type==="RealPid:#TournamentStructure"&&person._pid.Number!==0&&settingsUse.PeopleDbLink!==null&&includeLink){player="<a class=\"clickable\" target=\"_blank\""+"href=\"".concat(settingsUse.PeopleDbLink).concat(person._pid.Number,"\">")+player+"</a>"}if(includeBboUsername&&!isNullOrWhiteSpace(person._bboUsername)&&settingsUse.ShowBboUsername){player+=settingsUse.ShowFirstAndLastName?", ("+person._bboUsername+")":person._bboUsername}if(includeNote&&!isNullOrWhiteSpace(person._resultNote)&&settingsUse.ShowNoteTeamPlayers){player+=" ("+person._resultNote+")"}return player}function teamToHtmlWithFlag(participant,showNumberInBrackets,useShortName){var includeLinks=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var people="";participant._people.forEach(function(person){if(person._pid.__type!=="NoPid:#TournamentStructure"){people+=getPlayerHtml(person,true,true)+"<br/>"}});var name=useShortName?participant._shortName:participant._name;var result=includeLinks?participantNumberLink(getFlagImageHtml(participant._flag)+createToolTipHtml(people,name),participant.Number):name;if(showNumberInBrackets)result+="<span class=\"small\"> (".concat(participant.Number,")</span>");return result}function pairToHtml(participant,showNumberInBrackets){var result=getPlayerHtml(participant._person1,true,false,false)+" - "+getPlayerHtml(participant._person2,true,false,false);result=participantNumberLink(result,participant.Number);if(showNumberInBrackets)result+="<span class=\"small\"> (".concat(participant.Number,")</span>");return result}function teamPairToHtml(pair){return"".concat(getPlayerHtml(pair._person1,true))+" - ".concat(getPlayerHtml(pair._person2,true))}function teamToHtmlWithFlagOrPair(participant,showNumberInBrackets,useShortName){if(settings.TournamentType===2)return teamToHtmlWithFlag(participant,showNumberInBrackets,useShortName);else return pairToHtml(participant,showNumberInBrackets)}function participantToNumberWithTooltipHtml(participant,inline){var tooltipContents="";switch(settings.TournamentType){case 0:tooltipContents=getPlayerHtml(participant._person1,true,false,false)+" - "+getPlayerHtml(participant._person2,true,false,false);break;case 1:tooltipContents=getPlayerHtml(participant._person,true,false,false);break;case 2:tooltipContents=participant._name;break;}return participantNumberLink("<div class=\"".concat(inline?"d-inline-block":"align-middle"," text-center clickable\">")+createToolTipHtml(tooltipContents,participant.Number.toString())+"</div>",participant.Number)}function atMostNPlaces(value,n){if(value==="")return value;var multiplier=Math.pow(10,n);var toRound=value*multiplier;if(toRound%1===-0.5)toRound-=0.5;return Math.round(toRound)/multiplier}function atMostTwoPlaces(value){return atMostNPlaces(value,2)}function exactlyNPlaces(value,n){var atMostN=atMostNPlaces(value,n);if(atMostN==="")return"";else return atMostN.toFixed(n)}function showIfNotZero(value){return value===0?"":value.toString()}function personToInfo(person){var result="";if(person._sex===1)result+="K";switch(person._ageCategory){case 1:result+="M";break;case 2:result+="JM";break;case 3:result+="JJ";break;case 4:result+="JS";break;case 5:result+="S";break;case 6:result+="N";break;}return result}function getRank(person){var rank="";if(person._pid.__type==="RealPid:#TournamentStructure"&&person._pid.Number!==0||person._wk!==0){rank=person._wk.toString()}if(person._wkTag!==null){rank=createToolTipHtml(person._wkTag,rank)}return rank}function dateFromJson(str){return new Date(parseInt(str.substr(6)))}function wellDefined(something){if(something===null)return false;if(something==="")return false;return true}
"use strict";function loadStages(){if(settings.AllStages.length<=1){$("#stagesNavbar").addClass("d-none");return}var links="";$.each(settings.AllStages,function(index,value){var hashLinkOrNothing="";if(value._linkToRoundResults){hashLinkOrNothing=HashData.create(LeftView.Round,MobileView.Round,value._exampleBoardNumber,value._sessionNumberIfSingle,value._roundNumberIfSingle).getLink()}links+="<li class=\"nav-item\">"+(settings.Stage._id===value._id?"<span class=\"nav-link\" style=\"background-color: #333; color: #fff!important;\">"+"".concat(value._name,"</span>"):"<a class=\"nav-link clickable\" href=\""+(settings.Stage._id>=0?"../":"")+(value._id>=0?value._id+"/":"")+"index.html".concat(hashLinkOrNothing,"\">")+"".concat(value._name,"</a>"))+"</li>"});$("#stagesNavbar").removeClass("d-none");$("#stages").html(links)}
"use strict";var colorsNames=["clubs","diamonds","hearts","spades","notrump"];function replaceLettersWithImages(str){str=str.replace("C",colorsPics["c"]);str=str.replace("D",colorsPics["d"]);str=str.replace("H",colorsPics["h"]);str=str.replace("S",colorsPics["s"]);str=str.replace("NT",colorsPics["nt"]);return str}function createBiddingOrPlay(biddingOrPlay){var rows="";biddingOrPlay.forEach(function(step){var bids="";step.forEach(function(bid){if(bid===null)bid="";if(bid!=="PASS")bid=replaceLettersWithImages(bid);bids+="<td>".concat(bid,"</td>")});rows+="<tr>".concat(bids,"</tr>")});return"<table class=\"table table-sm\"><tr><th>W</th><th>N</th><th>E</th><th>S</th></tr>".concat(rows,"</table>")}function tricksHtml(overTricks,play){var tricks=overTricks===0?"=":overTricks>0?"+"+overTricks.toString():overTricks.toString();if(typeof play!=="undefined"&&play!==null&&play.length>0){tricks=createToolTipHtml(createBiddingOrPlay(play),tricks)}return tricks}var figures=["J","Q","K","A"];function leadHtml(lead){if(lead===null||typeof lead==="undefined")return"";var height=lead.CardHeight<9?(lead.CardHeight+2).toString():figures[lead.CardHeight-9];var colorImg="<img class=\"table-img\" src=\"".concat(primaryPath).concat(colorsNames[lead.CardColor],".gif\" ")+"onerror=\"imgError(this, '".concat(colorsNames[lead.CardColor],".gif');\">");return colorImg+height}function scoreToContract(score,includeDetails){if(score===null){return""}switch(score.__type){case"PointScore:#CalculatingEngine":{var height=score.Height;if(!score.WithContract){if(includeDetails)return score.Score.toString();else return""}else if(height===0){return"PASS"}else{var colorImg="<img class=\"table-img\" src=\"".concat(primaryPath).concat(colorsNames[score.Denomination],".gif\" ")+"onerror=\"imgError(this, '".concat(colorsNames[score.Denomination],".gif');\">");var doubles=score.Xx===0?"":score.Xx===1?"X":"XX";var details="";if(includeDetails){details+=declarerHtml(score.Declarer);details+=tricksHtml(score.Overtricks,null);details+=leadHtml(score.Lead)}return height+colorImg+doubles+details}}case"ArtificialScoreAveragePlus:#CalculatingEngine":return"AP";case"ArtificialScoreAverageMinus:#CalculatingEngine":return"AM";case"ArtificialScoreAverage:#CalculatingEngine":return"AA";case"ArtificialScoreSitOut:#CalculatingEngine":return"SIT-OUT";case"WeightedScore:#CalculatingEngine":var _contract="";$.each(score._weightingComponents,function(index,value){if(Number(index)>0)_contract+=";";_contract+=(Math.round(value._scoreWeightDecimal*1000)/10).toString()+"%";_contract+="(".concat(scoreToContract(value.Score,true),")")});return _contract;case"ScoreSewog:#CalculatingEngine":return"BO:"+scoreToContract(score.BeforeOffence,true)+"EAO:"+scoreToContract(score.ExpectedAfterOffence,true)+"AAO:"+scoreToContract(score.ActualAfterOffence,true);case"ArtificialAdjustedScore:#CalculatingEngine":return"ARB"+score.Result._pointsDecimal.toString();default:return"ERR";}}function contractHtml(score,bidding){var includeDetails=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(score===null){return""}var contract=scoreToContract(score,includeDetails);var withTooltip=false;var toolTipValue="ERR";var shortened="ARB";switch(score.__type){case"PointScore:#CalculatingEngine":if(!includeDetails&&bidding.length>0){withTooltip=true;shortened=contract;toolTipValue=createBiddingOrPlay(bidding)}break;case"ArtificialScoreSitOut:#CalculatingEngine":case"WeightedScore:#CalculatingEngine":case"ScoreSewog:#CalculatingEngine":case"ArtificialAdjustedScore:#CalculatingEngine":toolTipValue=contract;withTooltip=true;break;}return withTooltip?createToolTipHtml(toolTipValue,shortened):contract}var shortableContracts={"AM":"M","AP":"P","AA":"A","ARB0":"0"};function shortenArtificialScores(ns,ew){if(ns in shortableContracts&&ew in shortableContracts)return"A".concat(shortableContracts[ns]).concat(shortableContracts[ew]);if(ns==="SIT-OUT"&&ew==="SIT-OUT")return createToolTipHtml(ns,"ARB");return createToolTipHtml("".concat(ns,"|").concat(ew),"ARB")}function scoreToContractAndTricksAndShowScoreAndShowDetails(scoreResult){var contract;if(scoreResult.IsEwComplementar){contract=contractHtml(scoreResult.NsScore,scoreResult.Bidding)}else{contract=shortenArtificialScores(scoreToContract(scoreResult.NsScore,true),scoreToContract(scoreResult.EwScore,true))}var showScore=scoreResult.IsEwComplementar&&scoreResult.NsScore!==null&&scoreResult.NsScore.__type==="PointScore:#CalculatingEngine";var showDetails=showScore&&scoreResult.NsScore.Height!==0;var tricks="";if(showDetails){tricks=tricksHtml(scoreResult.NsScore.Overtricks,scoreResult.Play)}return[contract,tricks,showScore,showDetails]}
"use strict";var crossTablesCount=0;var crossTableLoaded=false;function setCrossTableContent(){if(!settings.ShowCrossTable){$("#contentC").html("");return $.when()}if(crossTableLoaded&&!settings.LiveResults)return $.when();var crossTableJsonFileName="./cs.json";return $.getJSON(crossTableJsonFileName).done(function(json){var crossTables=json;var html="";$.each(crossTables.CrossTables,function(crossTableIndex,crossTable){var crossTableHtml="";$.each(crossTable.ParticipantRoundResults,function(rowIndex,value){crossTableHtml+=createCrossTableRow(value,crossTable.Teams,rowIndex)});var header=crossTable.ParticipantGroup===null?"":"<h4 class=\"text-center\">".concat(crossTable.ParticipantGroup,"</h4>");var columns="";for(var i=0;i<crossTable.Teams;i++){columns+="<th scope=\"col\" class=\"align-middle text-center crossTableCol\">".concat(i+1,"</th>")}html+=header+"<table class=\"table table-sm table-bordered header-sticky\" id=\"tableC".concat(String(crossTableIndex),"\">")+"<thead><tr>"+"<th scope=\"col\" class=\"align-middle text-center\" id=\"placeC\">".concat(language.placeColumn,"</th>")+"<th scope=\"col\" class=\"align-middle text-center\" id=\"teamC\">".concat(language.team,"</th>")+"<th scope=\"col\" class=\"align-middle text-center\" id=\"resultC\">".concat(language.resultBL,"</th>")+columns+"</tr></thead>"+"<tbody id=\"cBody\">".concat(crossTableHtml,"</tbody>")+"</table>"});for(var i=0;i<crossTablesCount;i++){resizeObserverUnObserve($("#tableC".concat(i)))}crossTablesCount=crossTables.CrossTables.length;$("#contentC").html(html);$("#alertC").addClass("d-none");for(var _i=0;_i<crossTablesCount;_i++){resizeObserverObserve($("#tableC".concat(_i)))}onResize();crossTableLoaded=true})["catch"](function(){if(!crossTableLoaded){$("#contentC").html("");$("#alertC").html("<div class=\"alert alert-info\" role=\"alert\">".concat(language.fetchingCrossTableFailed,"</div>"));$("#alertC").removeClass("d-none");$("#tableC").addClass("d-none")}})}function createCrossTableRow(crossTableRow,teams,index){var names=teamToHtmlWithFlagOrPair(crossTableRow.Participant,false,false);var namesShort=teamToHtmlWithFlagOrPair(crossTableRow.Participant,false,true);var row="<tr><td class=\"align-middle text-center\">".concat(crossTableRow.Place,"</td>")+"<td class=\"align-middle d-none d-md-table-cell text-left\">".concat(names,"</td>")+"<td class=\"align-middle text-left d-md-none \">".concat(namesShort,"</td>")+"<td class=\"align-middle text-center\"><strong>".concat(atMostTwoPlaces(crossTableRow.Result),"</strong></td>");var nextOpponentIndex=1;var i=0;while(i<crossTableRow.Segments.length){while(crossTableRow.Segments[i].Segment!==nextOpponentIndex){row+="<td class=\"".concat(index===nextOpponentIndex-1?"table-dark":"","\"></td>");nextOpponentIndex++}var tablePrimary=settings.LiveResults&&crossTableRow.Segments[i].Live?"table-primary":"";row+="<td class=\"align-middle ".concat(tablePrimary," text-center\">");var first=true;while(i<crossTableRow.Segments.length&&crossTableRow.Segments[i].Segment===nextOpponentIndex){if(!first)row+="<br>";row+=roundResultsLink(atMostTwoPlaces(crossTableRow.Segments[i].Result).toString(),crossTableRow.Segments[i].Session,crossTableRow.Segments[i].Round,"onclick=\"highlightRoundResultRow(&quot;".concat(crossTableRow.Segments[i].Table,"&quot;)\""));i++;first=false}row+="</td>";nextOpponentIndex++}for(var _i2=nextOpponentIndex;_i2<=teams;_i2++){row+="<td class=\"".concat(index===_i2-1?"table-dark":"","\"></td>")}row+="</tr>";return row}
"use strict";var individualClassificationFromSegmentSessionLoaded=-1;var individualClassificationFromSegmentRoundLoaded=-1;var individualClassificationFromSegmentSegmentLoaded=-1;function onLoadingIndividualClassificationSegmentFail(){if(individualClassificationFromSegmentRoundLoaded!==hashData.round||individualClassificationFromSegmentSessionLoaded!==hashData.session||individualClassificationFromSegmentSegmentLoaded!==hashData.segment){$("#alertJ").html("<div class=\"alert alert-info\" role=\"alert\">"+language.fetchingIndividualClassificationFailed+"</div>");$("#alertJ").removeClass("d-none");$("#tableJ").addClass("d-none");$("#roundShownJ").addClass("d-none")}}function setIndividualClassificationFromSegmentContentLazy(){if(!settings.ShowButler)return $.when();if(individualClassificationFromSegmentRoundLoaded===hashData.round&&individualClassificationFromSegmentSessionLoaded===hashData.session&&individualClassificationFromSegmentSegmentLoaded===hashData.segment&&!settings.LiveResults)return $.when();if(settings.AvailableIndividualClassificationSegments.findIndex(function(availableIndividualClassificationSegment){return availableIndividualClassificationSegment.Session===hashData.session&&availableIndividualClassificationSegment.Round===hashData.round&&availableIndividualClassificationSegment.Segment===hashData.segment})===-1){console.log("Failed to load individual classification segment (not available)");onLoadingIndividualClassificationSegmentFail();return $.when()}$("#alertJ").html("");var individualClassificationFromSegmentJson="./butler".concat(hashData.session,"-").concat(hashData.round,"-").concat(hashData.segment,".json");return $.getJSON(individualClassificationFromSegmentJson).done(function(json){var individualClassificationFromSegment=json;var html="";$.each(individualClassificationFromSegment.Rows,function(index,individualClassificationFromSegmentRow){html+=createIndividualClassificationFromSegmentRow(individualClassificationFromSegmentRow)});$("#jBody").html(html);$("#roundShownJ").html("".concat(language.session," ").concat(hashData.session,", ")+roundResultsLink("".concat(language.round," ").concat(hashData.round),hashData.session,hashData.round)+"".concat(language.segmentFull," ").concat(hashData.segment+1));$("#alertJ").addClass("d-none");$("#tableJ").removeClass("d-none");$("#roundShownJ").removeClass("d-none");individualClassificationFromSegmentRoundLoaded=hashData.round;individualClassificationFromSegmentSessionLoaded=hashData.session;individualClassificationFromSegmentSegmentLoaded=hashData.segment;onResize()})["catch"](function(){onLoadingIndividualClassificationSegmentFail()})}function createIndividualClassificationFromSegmentRow(json){var table=segmentLink(json.TableAndPosition,hashData.session,hashData.round,hashData.segment,json.TableOpen);return"<tr><td class=\"align-middle text-center\">".concat(json.Place,"</td>")+"<td class=\"align-middle text-center\">".concat(table,"</td>")+"<td class=\"align-middle text-left text-nowrap\">"+getPlayerHtml(json.Person1,true)+" - "+getPlayerHtml(json.Person2,true)+"</td>"+"<td class=\"align-middle text-left d-sm-table-cell d-none\">"+teamToHtmlWithFlag(json.Team,false,true)+"</td>"+"<td class=\"align-middle text-center\">".concat(atMostTwoPlaces(json.Result),"</td>")+"</tr>"}function setIndividualClassificationContentLazy(){if(!settings.ShowButler)return $.when();if(settings.ShowCarryOverInIndividualClassification){$("#carryOverI").addClass("d-sm-table-cell");$("#sessionResultI").addClass("d-md-table-cell")}else{$("#carryOverI").removeClass("d-sm-table-cell");$("#sessionResultI").removeClass("d-md-table-cell")}$("#alertI").html("");var individualClassificationJson="./butler.json";return $.getJSON(individualClassificationJson).done(function(json){var individualClassification=json;$(".butlerCol").remove();$.each(individualClassification.Segments,function(index,segment){$("#iThL").find("th").eq(6+Number(index)).after("<th scope=\"col\" class=\"align-middle text-center butlerCol\">"+butlerFromSegmentLink("".concat(segment.Session,"-").concat(segment.Round,"-").concat(segment.Segment+1),segment.Session,segment.Round,segment.Segment)+"</th>")});var html="";$.each(individualClassification.ParticipantsResultsBySegments,function(index,value){html+=createIndividualClassificationRow(value,individualClassification.Segments)});if(individualClassification.ParticipantsResultsBySegmentsBelowRequiredPercentagePlayed.length>0){html+="<tr><td class=\"align-middle text-center\" colspan=\"100\"><b>"+language.individualClassificationPlayedLessThanBeforePercentage+" "+individualClassification.PercentageRequiredToBePlayed+"% "+language.individualClassificationPlayedLessThanAfterPercentage+"</b></td></tr>"}$.each(individualClassification.ParticipantsResultsBySegmentsBelowRequiredPercentagePlayed,function(index,value){html+=createIndividualClassificationRow(value,individualClassification.Segments)});$("#iBody").html(html);$("#alertI").addClass("d-none");$("#tableI").removeClass("d-none");onResize()})["catch"](function(){$("#alertI").html("<div class=\"alert alert-info\" role=\"alert\">\n"+language.fetchingIndividualClassificationFailed+"</div>");$("#alertI").removeClass("d-none");$("#tableI").addClass("d-none")})}function createIndividualClassificationRow(json,segments){var nextSegmentIndex=0;var carryOver=settings.ShowCarryOverInIndividualClassification?"<td class=\"align-middle text-center d-none d-sm-table-cell\">"+atMostTwoPlaces(json.CarryOverSum)+"</td>"+"<td class=\"align-middle text-center d-none d-md-table-cell\">"+atMostTwoPlaces(json.SessionSum)+"</td>":"";var row="<tr><td class=\"align-middle text-center\">".concat(json.Place,"</td>")+"<td class=\"align-middle text-left text-nowrap\">"+getPlayerHtml(json.Person._person,true)+"</td>"+"<td class=\"align-middle text-left d-sm-table-cell d-none\">"+teamToHtmlWithFlag(json.Team,false,true)+"</td>"+carryOver+"<td class=\"align-middle text-center\"><strong>".concat(atMostTwoPlaces(json.Result),"</strong></td>")+"<td class=\"align-middle text-center\">".concat(json.CountedBoards,"</td>");for(var i=0;i<json.ResultsFromSegments.length;i++){var resultFromSegment=json.ResultsFromSegments[i];while(resultFromSegment.Session!==segments[nextSegmentIndex].Session||resultFromSegment.Round!==segments[nextSegmentIndex].Round||resultFromSegment.Segment!==segments[nextSegmentIndex].Segment){row+="<td></td>";nextSegmentIndex++}row+="<td class=\"align-middle text-center\">".concat(atMostTwoPlaces(resultFromSegment.Result),"</td>");nextSegmentIndex++}for(var _i=nextSegmentIndex;_i<segments.length;_i++){row+="<td></td>"}row+="</tr>";return row}
"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var segmentResultsSessionLoaded=-1;var segmentResultsRoundLoaded=-1;var segmentResultsSegmentLoaded=-1;var segmentResultsTableLoaded="";function segmentResultsGetLineWithResults(columnsSmall,columnsBig,header,resultHost1,resultGuest1,resultHost2,resultGuest2){function bigAndSmallResultLine(resultHost,resultGuest){return"<td class=\"text-center d-none d-md-table-cell\">".concat(atMostTwoPlaces(resultHost),"</td>")+"<td class=\"text-center d-none d-md-table-cell\">".concat(atMostTwoPlaces(resultGuest),"</td>")+"<td class=\"text-center d-md-none\">".concat(atMostTwoPlaces(resultHost),"-").concat(atMostTwoPlaces(resultGuest),"</td>")}return"<tr class=\"font-weight-bold\">"+"<td colspan=\"".concat(columnsSmall,"\" class=\"text-right d-md-none border-0\">").concat(header,":</td>")+"<td colspan=\"".concat(columnsBig,"\" class=\"text-right d-none d-md-table-cell border-0\">").concat(header,":</td>")+bigAndSmallResultLine(resultHost1,resultGuest1)+(settings.ShowTwoResults?bigAndSmallResultLine(resultHost2,resultGuest2):"")+"</tr>"}function onLoadingSegmentFail(){if(segmentResultsRoundLoaded!==hashData.round||segmentResultsSessionLoaded!==hashData.session||segmentResultsSegmentLoaded!==hashData.segment||segmentResultsTableLoaded!==hashData.table){$("#alertS").html("<div class=\"alert alert-info\" role=\"alert\">"+language.fetchingSegmentFailed+"</div>");$("#alertS").removeClass("d-none");$("#tableS").addClass("d-none");boardsAvailableInSegment=[];segmentResultsSessionLoaded=-1}}var boardsAvailableInSegment=[];function setSegmentResultsLazy(){if(settings.TournamentType!==2)return $.when();if(segmentResultsRoundLoaded===hashData.round&&segmentResultsSessionLoaded===hashData.session&&segmentResultsSegmentLoaded===hashData.segment&&segmentResultsTableLoaded===hashData.table&&!settings.LiveResults)return $.when();if(roundResultIndex(hashData.session,hashData.round)===-1||!settings.AvailableSegmentsTables.includes(hashData.table)){onLoadingSegmentFail();return $.when()}if(settings.ShowTwoResults){$("#imps2SL").addClass("d-md-table-cell");$("#impsNs2SL").addClass("d-md-table-cell");$("#impsEw2SL").addClass("d-md-table-cell")}else{$("#imps2SL").removeClass("d-md-table-cell");$("#impsNs2SL").removeClass("d-md-table-cell");$("#impsEw2SL").removeClass("d-md-table-cell")}if(settings.ShowLeads){$("#leadOSL").removeClass("d-none");$("#leadCSL").addClass("d-md-table-cell");$(".segmentWide").attr("colspan",13);$(".segmentNarrow").attr("colspan",6);$(".segmentMobile").attr("colspan",9)}else{$("#leadOSL").addClass("d-none");$("#leadCSL").removeClass("d-md-table-cell");$(".segmentWide").attr("colspan",11);$(".segmentNarrow").attr("colspan",5);$(".segmentMobile").attr("colspan",8)}$("#alertS").html("");$("#segmentImportedFromBbo").addClass("d-none");var segmentResultJson="./s".concat(hashData.table,"-").concat(hashData.session,"-").concat(hashData.round,"-").concat(hashData.segment,".json");return $.getJSON(segmentResultJson).done(function(json){var segmentResult=json;var html="";var columnsBig=13-(settings.ShowLeads?0:2);var columnsSmall=7-(settings.ShowLeads?0:1);if(!segmentResult.FirstSegment){html+=segmentResultsGetLineWithResults(columnsSmall,columnsBig,language.previousSegments,segmentResult.ImpsHostPrevious1,segmentResult.ImpsGuestPrevious1,segmentResult.ImpsHostPrevious2,segmentResult.ImpsGuestPrevious2)}$.each(segmentResult.Scores,function(index,value){html+=createSegmentResultRow(value)});html+=segmentResultsGetLineWithResults(columnsSmall,columnsBig,language.segmentFull,segmentResult.ResultHostSegment1,segmentResult.ResultGuestSegment1,segmentResult.ResultHostSegment2,segmentResult.ResultGuestSegment2);if(!segmentResult.FirstSegment){html+=segmentResultsGetLineWithResults(columnsSmall,columnsBig,language.sum,segmentResult.ImpsHostAfter1,segmentResult.ImpsGuestAfter1,segmentResult.ImpsHostAfter2,segmentResult.ImpsGuestAfter2)}html+=segmentResultsGetLineWithResults(columnsSmall,columnsBig,language.resultHL,segmentResult.ResultHost1,segmentResult.ResultGuest1,segmentResult.ResultHost2,segmentResult.ResultGuest2);var teamHost=teamToHtmlWithFlag(segmentResult.Host,true,false);var teamGuest=teamToHtmlWithFlag(segmentResult.Guest,true,false);if(typeof segmentResult.BboImportLink!=="undefined"&&segmentResult.BboImportLink!==null){$("#segmentImportedFromBbo").removeClass("d-none");$("#segmentImportedFromBboLink").attr("href",segmentResult.BboImportLink);$("#segmentImportedFromBboLink").text(segmentResult.BboImportLink)}$("#sBody").html(html);$("#hostSL").html(teamHost);$("#guestSL").html(teamGuest);$("#hostSS").html(teamHost);$("#guestSS").html(teamGuest);$("#tableRoundSL").html(roundResultsLink("".concat(language.roundCaps," ").concat(hashData.round),hashData.session,hashData.round)+", ".concat(language.segmentCaps," ").concat(hashData.segment+1,", ").concat(language.tableCaps," ").concat(hashData.table));$("#openNsSL").html("".concat(language.nsBL,": ").concat(teamPairToHtml(segmentResult.OpenNs)));$("#closedNsSL").html("".concat(language.nsBL,": ").concat(teamPairToHtml(segmentResult.ClosedNs)));$("#openEwSL").html("".concat(language.ewBL,": ").concat(teamPairToHtml(segmentResult.OpenEw)));$("#closedEwSL").html("".concat(language.ewBL,": ").concat(teamPairToHtml(segmentResult.ClosedEw)));$("#openNsSS").html("".concat(language.nsBL,": ").concat(teamPairToHtml(segmentResult.OpenNs)));$("#closedNsSS").html("".concat(language.nsBL,": ").concat(teamPairToHtml(segmentResult.ClosedNs)));$("#openEwSS").html("".concat(language.ewBL,": ").concat(teamPairToHtml(segmentResult.OpenEw)));$("#closedEwSS").html("".concat(language.ewBL,": ").concat(teamPairToHtml(segmentResult.ClosedEw)));$("tr[data-participants*='|".concat(hashData.followed,"|']")).addClass("table-primary");$("#alertS").addClass("d-none");$("#tableS").removeClass("d-none");segmentResultsRoundLoaded=hashData.round;segmentResultsSessionLoaded=hashData.session;segmentResultsSegmentLoaded=hashData.segment;segmentResultsTableLoaded=hashData.table;boardsAvailableInSegment=segmentResult.Scores.map(function(score){return score.Board})})["catch"](function(){onLoadingSegmentFail()})}function createSegmentResultRow(segmentScore){var openScore=segmentScore.ScoreNs;var closedScore=segmentScore.ScoreEw;var scorePresent=segmentScore.ScorePresent;var _scoreToContractAndTr=scoreToContractAndTricksAndShowScoreAndShowDetails(openScore),_scoreToContractAndTr2=_slicedToArray(_scoreToContractAndTr,4),contractOpen=_scoreToContractAndTr2[0],tricksOpen=_scoreToContractAndTr2[1],showScoreOpen=_scoreToContractAndTr2[2],showDetailsOpen=_scoreToContractAndTr2[3];var _scoreToContractAndTr3=scoreToContractAndTricksAndShowScoreAndShowDetails(closedScore),_scoreToContractAndTr4=_slicedToArray(_scoreToContractAndTr3,4),contractClosed=_scoreToContractAndTr4[0],tricksClosed=_scoreToContractAndTr4[1],showScoreClosed=_scoreToContractAndTr4[2],showDetailsClosed=_scoreToContractAndTr4[3];var boardAsPlayed=segmentScore.BoardAsPlayed;var board=segmentScore.Board;var impsHost1=segmentScore.ImpsHost1;var impsGuest1=segmentScore.ImpsGuest1;var impsHost2=segmentScore.ImpsHost2;var impsGuest2=segmentScore.ImpsGuest2;var showResultHost1=!scorePresent?"":impsHost1+impsGuest1!==settings.ResultsShouldSumTo1?atMostTwoPlaces(impsHost1):impsHost1<0?"":impsHost1===0?"-":atMostTwoPlaces(impsHost1);var showResultGuest1=!scorePresent?"":impsHost1+impsGuest1!==settings.ResultsShouldSumTo1?atMostTwoPlaces(impsGuest1):impsGuest1<0?"":impsGuest1===0?"-":atMostTwoPlaces(impsGuest1);var showResultHost2=!scorePresent||!settings.ShowTwoResults?"":impsHost2+impsGuest2!==settings.ResultsShouldSumTo2?atMostTwoPlaces(impsHost2):impsHost2<0?"":impsHost2===0?"-":atMostTwoPlaces(impsHost2);var showResultGuest2=!scorePresent||!settings.ShowTwoResults?"":impsHost2+impsGuest2!==settings.ResultsShouldSumTo2?atMostTwoPlaces(impsGuest2):impsGuest2<0?"":impsGuest2===0?"-":atMostTwoPlaces(impsGuest2);var wrongLinesOpenClass=segmentScore.WrongLinesOpen?"wrongLines":"";var wrongLinesClosedClass=segmentScore.WrongLinesClosed?"wrongLines":"";function contractAndTricksCells(wrongLinesClass,additionalClass,contract,tricks,score,showDetails,includeScore){var result="<td class=\"align-middle text-center text-nowrap ".concat(additionalClass," ").concat(wrongLinesClass,"\">").concat(contract,"</td>")+"<td class=\"align-middle text-center ".concat(additionalClass," ").concat(wrongLinesClass,"\">")+(showDetails?declarerHtml(score.Declarer):"")+"</td>"+(settings.ShowLeads?"<td class=\"align-middle text-center text-nowrap ".concat(additionalClass," ").concat(wrongLinesClass,"\">")+(showDetails?leadHtml(score.Lead):"")+"</td>":"")+"<td class=\"align-middle text-right ".concat(additionalClass," ").concat(wrongLinesClass,"\">").concat(tricks,"</td>");if(includeScore){result+="<td colspan=\"2\" class=\"align-middle ".concat(wrongLinesClass," ").concat(score===null||score.Score>0?"text-left":score.Score===0?"text-center":"text-right"," d-md-none\">")+(showDetails&&score!==null?score.Score:"")+"</td>"}return result}function scoreCells(wrongLinesClass,score,showScore){return"<td class=\"align-middle text-right d-none d-md-table-cell ".concat(wrongLinesClass,"\">")+(showScore&&score.Score>0?score.Score:"")+"</td>"+"<td class=\"align-middle text-right d-none d-md-table-cell ".concat(wrongLinesClass,"\">")+(showScore&&score.Score<0?-1*score.Score:"")+"</td>"}function resultCell(result,additionalClass){return"<td class=\"align-middle text-center ".concat(additionalClass,"\">").concat(result,"</td>\n")}var protNumberLink=protocolNumberLink(boardAsPlayed.toString(),board);var roundResultsRow="<tr>"+"<td rowspan=\"2\" class=\"align-middle text-center text-nowrap d-md-none\">"+protNumberLink+"</td>"+contractAndTricksCells(wrongLinesOpenClass,"",contractOpen,tricksOpen,openScore.NsScore,showDetailsOpen,true)+scoreCells(wrongLinesOpenClass,openScore.NsScore,showScoreOpen)+"<td class=\"align-middle text-center text-nowrap d-none d-md-table-cell border-3\">"+protNumberLink+"</td>"+contractAndTricksCells(wrongLinesClosedClass,"d-none d-md-table-cell",contractClosed,tricksClosed,closedScore.NsScore,showDetailsClosed,false)+scoreCells(wrongLinesClosedClass,closedScore.NsScore,showScoreClosed)+resultCell(showResultHost1,"table-info")+resultCell(showResultGuest1,"d-none d-md-table-cell table-warning")+(settings.ShowTwoResults?resultCell(showResultHost2,"table-info")+resultCell(showResultGuest2,"d-none d-md-table-cell table-warning"):"")+"</tr>"+"<tr>"+contractAndTricksCells(wrongLinesClosedClass,"d-md-none",contractClosed,tricksClosed,closedScore.NsScore,showDetailsClosed,true)+resultCell(showResultGuest1,"d-md-none table-warning")+(settings.ShowTwoResults?resultCell(showResultGuest2,"d-md-none table-warning"):"")+"</tr>";return roundResultsRow}
"use strict";var roundResultsSessionLoaded=-1;var roundResultsRoundLoaded=-1;var roundResultTableToHighlight=null;function roundResultIndex(session,round){return settings.AvailableRoundResults.findIndex(function(availableRoundResult){return availableRoundResult.Session===session&&availableRoundResult.Round===round})}function highlightRoundResultRow(table){roundResultTableToHighlight=table}function maybeHighlightRoundResultRow(){if(roundResultTableToHighlight===null)return;var $elements=$("#rrBody tr[data-table='".concat(roundResultTableToHighlight,"']"));$elements.addClass("table-success");setTimeout(function(){return $elements.removeClass("table-success")},10000);roundResultTableToHighlight=null}function roundResultGetLiveSegmentTeams(rr,segmentsMax){var live={};if(settings.TournamentType!==2)return live;function fillSegmentLive(segmentIndex){live[segmentIndex]=false;if(settings.LiveResults)for(var j=0;j<rr.Results.length;j++){if(rr.Results[j].Segments.length>segmentIndex&&rr.Results[j].Segments[segmentIndex].Live){live[segmentIndex]=true;break}}}if(segmentsMax===1){fillSegmentLive(0);if(live[0]){$("#oImpColumn").addClass("table-primary")}else{$("#oImpColumn").removeClass("table-primary")}}else if(segmentsMax>1){for(var i=segmentsMax;i>0;i--){if(i!==1&&i!==segmentsMax)$("#oThL").find("th").eq(6).after("<th scope=\"col\" class=\"align-middle text-center segOL\">"+"&Sigma; 1-".concat(i,"</th>"));fillSegmentLive(i-1);var headerText="".concat(language.segment," ").concat(i);var headerHtml=settings.ShowSegmentsStartTimes?createToolTipHtml(dateFromJson(rr.SegmentsStartTimes[i-1]).toLocaleString([],{weekday:"long",hour:"2-digit",minute:"2-digit"}),headerText):headerText;$("#oThL").find("th").eq(6).after("<th scope=\"col\" class=\"align-middle text-center "+"".concat(live[i-1]?"table-primary":""," segOL\">").concat(headerHtml,"</th>"))}}return live}function onLoadingRoundResultsFail(){if(roundResultsRoundLoaded!==hashData.round||roundResultsSessionLoaded!==hashData.session){$("#alertO").html("<div class=\"alert alert-info\" role=\"alert\">"+language.fetchingRoundResultsFailed+"</div>");$("#alertO").removeClass("d-none");$("#roundO").addClass("d-none");$("#tableO").addClass("d-none")}}function setRoundContentLazy(){if(roundResultsRoundLoaded===hashData.round&&roundResultsSessionLoaded===hashData.session&&!settings.LiveResults)return $.when();if(!settings.ShowRoundResults){return $.when()}if(roundResultIndex(hashData.session,hashData.round)===-1){console.log("Failed to load round results - no such round is available");onLoadingRoundResultsFail();return $.when()}if(settings.TournamentType===2){$("#oNsNumberColumn").removeClass("d-md-table-cell");$("#oEwNumberColumn").removeClass("d-md-table-cell");$("#oNsColumn").addClass("d-none");$("#oEwColumn").addClass("d-none");$("#oParticipantsColumn").removeClass("d-none");$("#oPlaceColumn").addClass("d-sm-table-cell");if(settings.ShowCarryOverInRoundResults)$("#oResultAfterColumn").removeClass("d-sm-table-cell");else $("#oResultAfterColumn").addClass("d-sm-table-cell")}else{$("#oNsNumberColumn").addClass("d-md-table-cell");$("#oEwNumberColumn").addClass("d-md-table-cell");$("#oNsColumn").removeClass("d-none");$("#oEwColumn").removeClass("d-none");$("#oParticipantsColumn").addClass("d-none");$("#oAdjustmentColumn").addClass("d-none");$("#oResultAfterColumn").removeClass("d-sm-table-cell");$("#oPlaceColumn").removeClass("d-sm-table-cell")}if(settings.ShowTwoResults){$("#oVpPartColumn").removeClass("d-none")}else{$("#oVpPartColumn").addClass("d-none")}$("#alertO").html("");$("#roundO").html("");var roundResultJson="./o".concat(hashData.session,"-").concat(hashData.round,".json");return $.getJSON(roundResultJson).done(function(json){var rr=json;shiftRoundResultsNavigationToRound(hashData.session,hashData.round);var showAdjustments=rr.Results.some(function(value){return value.AdjustmentsSumNs!==0||value.AdjustmentsSumEw!==0});if(showAdjustments&&settings.TournamentType===2){$("#oAdjustmentColumn").removeClass("d-none")}else{$("#oAdjustmentColumn").addClass("d-none")}if(settings.ShowCarryOverInRoundResults&&settings.TournamentType===2){$("#oCarryOverColumn").removeClass("d-none")}else{$("#oCarryOverColumn").addClass("d-none")}var segmentsMax=Math.max.apply(Math,rr.Results.map(function(o){return o.Segments===null?0:o.Segments.length}));$(".segOL").remove();var live=roundResultGetLiveSegmentTeams(rr,segmentsMax);var html="";var previousGroup=null;$.each(rr.Results,function(index,resultJson){if(resultJson.ParticipantGroup!==previousGroup){html+="<tr><td class=\"align-middle text-center\" colspan=\"100\"><b>"+"".concat(resultJson.ParticipantGroup===null?"":resultJson.ParticipantGroup,"</b></td></tr>")}previousGroup=resultJson.ParticipantGroup;html+=settings.TournamentType===2?getRoundResultRowTeams(resultJson,live,showAdjustments):getRoundResultRowPairsOrIndividual(resultJson)});$("#rrBody").html(html);var boardsHtml=rr.Boards?" (".concat(language.boards.toLowerCase()," ").concat(rr.Boards,")"):"";$("#roundO").html("".concat(language.roundHL," ").concat(rr.Round).concat(boardsHtml));$("#roundT").html(settings.ShowRoundsStartTimes?dateFromJson(rr.StartTime).toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"");$("tr[data-participants*='|".concat(hashData.followed,"|']")).addClass("table-primary");$("#alertO").addClass("d-none");$("#roundO").removeClass("d-none");$("#tableO").removeClass("d-none");roundResultsRoundLoaded=hashData.round;roundResultsSessionLoaded=hashData.session;maybeHighlightRoundResultRow()})["catch"](function(){onLoadingRoundResultsFail()})}function getRoundResultRowTeams(resultJson,live,showAdjustments){var participantNs=resultJson.Ns;var participantEw=resultJson.Ew;var carryOver="";if(settings.ShowCarryOverInRoundResults){carryOver="<td class=\"align-middle text-center\">"+(resultJson.CarryOverHost!==0?atMostTwoPlaces(resultJson.CarryOverHost):"&nbsp;")+"<br>"+(resultJson.CarryOverGuest!==0?atMostTwoPlaces(resultJson.CarryOverGuest):"&nbsp;")+"</td>"}var segments="";if(resultJson.Segments.length>1){$.each(resultJson.Segments,function(index,segment){segments+=roundResultRowSegmentHtml(index,segment,resultJson,live)})}var imps="";var sumsHtml=settings.ShowTwoResults?"".concat(atMostTwoPlaces(resultJson.Sum1Ns)," | ").concat(atMostTwoPlaces(resultJson.Sum2Ns),"<br>")+"".concat(atMostTwoPlaces(resultJson.Sum1Ew)," | ").concat(atMostTwoPlaces(resultJson.Sum2Ew)):"".concat(atMostTwoPlaces(resultJson.Sum1Ns),"<br>").concat(atMostTwoPlaces(resultJson.Sum1Ew));if(resultJson.Segments.length===1){var _segment=resultJson.Segments[0];if(_segment.NotMeantToBePlayed){imps+="<td class=\"align-middle text-center table-secondary\"></td>"}else{imps+="<td class=\"align-middle text-center "+(resultJson.Segments[0].Live?"table-primary":"")+" position-relative\">";if(resultJson.Segments[0].Towel){imps+="<img src=\"".concat(primaryPath,"whiteFlag.png\" ")+"onerror=\"imgError(this, 'whiteFlag.png');\" style=\"height: 2rem;\">"}else{imps+=segmentLink(sumsHtml+(live[0]?"<div style=\"position: absolute; bottom: 0; right: 3px;\"><small>"+resultJson.Segments[0].BoardsCounted+"</small></div>":""),hashData.session,hashData.round,0,resultJson.TableFull)}imps+="</td>"}}else{imps+="<td class=\"align-middle text-center\">".concat(sumsHtml,"</td>")}var namesNs=teamToHtmlWithFlagOrPair(participantNs,true,false);var namesEw=teamToHtmlWithFlagOrPair(participantEw,true,false);var namesCell="<td class=\"align-middle text-left d-none d-md-table-cell\">"+"".concat(namesNs,"<br>").concat(namesEw)+"</td>";var shortNamesNs=teamToHtmlWithFlagOrPair(participantNs,false,true);var shortNamesEw=teamToHtmlWithFlagOrPair(participantEw,false,true);var shortNamesCell="<td class=\"align-middle text-left d-md-none\">"+"".concat(shortNamesNs,"<br>").concat(shortNamesEw)+"</td>";var adjustments=showAdjustments?"<td class=\"align-middle text-center\">"+(resultJson.AdjustmentsSumNs!==0?atMostTwoPlaces(resultJson.AdjustmentsSumNs):"&nbsp;")+"<br>".concat(resultJson.AdjustmentsSumEw!==0?atMostTwoPlaces(resultJson.AdjustmentsSumEw):"&nbsp;","</td>"):"";var carryOverCell=settings.ShowCarryOverInRoundResults?"":"<td class=\"align-middle d-none d-sm-table-cell text-center\">"+"".concat(resultJson.ResultAfterRoundHost==null?"":atMostTwoPlaces(resultJson.ResultAfterRoundHost),"<br>")+"".concat(resultJson.ResultAfterRoundGuest==null?"":atMostTwoPlaces(resultJson.ResultAfterRoundGuest),"</td>");return"<tr data-participants=\"|".concat(participantNs.Number,"|").concat(participantEw.Number,"|\" ")+"data-table=\"".concat(resultJson.TableFull,"\">")+"<td class=\"align-middle d-none d-sm-table-cell text-center\">".concat(resultJson.Table,"</td>")+namesCell+shortNamesCell+carryOver+segments+imps+(settings.ShowTwoResults?"<td class=\"align-middle text-center\">".concat(atMostTwoPlaces(resultJson.Result1Host),"<br>")+"".concat(atMostTwoPlaces(resultJson.Result1Guest),"</td>"):"")+adjustments+"<td class=\"align-middle text-center\"><b>".concat(atMostTwoPlaces(resultJson.ResultNs),"<br>")+"".concat(atMostTwoPlaces(resultJson.ResultEw),"</b></td>")+carryOverCell+"<td class=\"align-middle d-none d-sm-table-cell text-center\">"+"".concat(resultJson.PlaceAfterRoundHost==null?"":resultJson.PlaceAfterRoundHost,"<br>")+"".concat(resultJson.PlaceAfterRoundGuest==null?"":resultJson.PlaceAfterRoundGuest,"</td>")+"</tr>"}function roundResultRowSegmentHtml(index,segment,resultJson,live){var html="";var shouldIncludeResultAfterSegment=index!==0&&index!==resultJson.Segments.length-1;if(segment.NotMeantToBePlayed){html+="<td></td>";if(shouldIncludeResultAfterSegment)html+="<td></td>";return html}html+="<td class=\"align-middle text-center "+(settings.LiveResults&&segment.Live?"table-primary":"")+" position-relative\">";if(segment.Towel){html+="<img src=\"".concat(primaryPath,"whiteFlag.png\" ")+"onerror=\"imgError(this, 'whiteFlag.png');\" style=\"height: 2rem;\">"}else{html+=segmentLink(segment.Started?settings.ShowTwoResults?"".concat(atMostTwoPlaces(segment.Result1Ns)," | ").concat(atMostTwoPlaces(segment.Result2Ns),"<br>")+"".concat(atMostTwoPlaces(segment.Result1Ew)," | ").concat(atMostTwoPlaces(segment.Result2Ew)):"".concat(atMostTwoPlaces(segment.Result1Ns),"<br>").concat(atMostTwoPlaces(segment.Result1Ew)):"",hashData.session,hashData.round,Number(index),resultJson.TableFull);if(live[index])html+="<div style=\"position: absolute; bottom: 0; right: 3px;\"><small>"+segment.BoardsCounted+"</small></div>"}html+="</td>";if(shouldIncludeResultAfterSegment)html+="<td class=\"align-middle text-center\">"+(segment.Started?settings.ShowTwoResults?"".concat(atMostTwoPlaces(segment.Result1AfterNs)," | ").concat(atMostTwoPlaces(segment.Result2AfterNs),"<br>")+"".concat(atMostTwoPlaces(segment.Result1AfterEw)," | ").concat(atMostTwoPlaces(segment.Result2AfterEw)):"".concat(atMostTwoPlaces(segment.Result1AfterNs),"<br>").concat(atMostTwoPlaces(segment.Result1AfterEw)):"")+"</td>";return html}function getRoundResultRowPairsOrIndividual(resultJson){var participantNs=resultJson.Ns;var participantEw=resultJson.Ew;var player1=participantNs._person1,player2=participantNs._person2;var player3=participantEw._person1,player4=participantEw._person2;var namesNs=getPlayerHtml(player1,true)+"<br>"+getPlayerHtml(player2,true);var namesEw=getPlayerHtml(player3,true)+"<br>"+getPlayerHtml(player4,true);return"<tr data-participants=\"|".concat(participantNs.Number,"|").concat(participantEw.Number,"|\" ")+"data-table=\"".concat(resultJson.TableFull,"\">")+"<td class=\"align-middle d-none d-md-table-cell text-center\">".concat(resultJson.Table,"</td>")+"<td class=\"align-middle d-none d-md-table-cell text-center\">"+participantToNumberWithTooltipHtml(resultJson.Ns,false)+"</td>"+"<td class=\"align-middle d-none d-md-table-cell text-center\">"+participantToNumberWithTooltipHtml(resultJson.Ew,false)+"</td>"+"<td class=\"align-middle text-right\">".concat(namesNs,"</td>")+"<td class=\"align-middle text-left\">".concat(namesEw,"</td>")+"<td class=\"align-middle text-center\">".concat(resultJson.Sum1Ns.toFixed(2),"-").concat(resultJson.Sum1Ew.toFixed(2),"</td>")+"<td class=\"align-middle text-center\">"+"".concat(resultJson.ResultNs.toFixed(2),":").concat(resultJson.ResultEw.toFixed(2))+"</td>"+"</tr>"}
"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var privateScoreLoaded=-1;function privateScoreSetTeamsColumns(){$("#boardHL").addClass("d-none");$("#lineHL").addClass("d-none");$("#contractHL").addClass("d-none");$("#declarerHL").addClass("d-none");$("#leadHL").addClass("d-none");$("#tricksHL").addClass("d-none");$("#scoreHL").addClass("d-none");$("#currentResultHL").addClass("d-none");$("#boardHS").addClass("d-none");$("#boardHS").addClass("d-none");$("#lineHS").addClass("d-none");$("#contractHS").addClass("d-none");$("#declarerHS").addClass("d-none");$("#leadHS").addClass("d-none");$("#tricksHS").addClass("d-none");$("#scoreHS").addClass("d-none");$("#currentResultHS").addClass("d-none");$("#hScoreNs").removeClass("d-md-table-cell");$("#hScoreEw").removeClass("d-md-table-cell");if(settings.ShowFirstAndLastName){$("#rosterPlayerColumn").removeClass("d-none")}else{$("#rosterPlayerColumn").addClass("d-none")}if(settings.ShowBboUsername){$("#rosterBboUsernameColumn").addClass("d-md-table-cell")}else{$("#rosterBboUsernameColumn").removeClass("d-md-table-cell")}if(settings.ShowRank){if(settings.ShowRankOnMobile){$("#rosterRankColumn").removeClass("d-md-table-cell");$("#rosterRankColumn").addClass("d-sm-table-cell")}else{$("#rosterRankColumn").removeClass("d-sm-table-cell");$("#rosterRankColumn").addClass("d-md-table-cell")}}else{$("#rosterRankColumn").removeClass("d-sm-table-cell");$("#rosterRankColumn").removeClass("d-md-table-cell")}if(settings.ShowInfo){if(settings.ShowInfoOnMobile){$("#rosterInfoColumn").removeClass("d-md-table-cell");$("#rosterInfoColumn").addClass("d-sm-table-cell")}else{$("#rosterInfoColumn").removeClass("d-sm-table-cell");$("#rosterInfoColumn").addClass("d-md-table-cell")}}else{$("#rosterInfoColumn").removeClass("d-sm-table-cell");$("#rosterInfoColumn").removeClass("d-md-table-cell")}if(settings.ShowClubs){$("#rosterClubColumn").addClass("d-md-table-cell")}else{$("#rosterClubColumn").removeClass("d-md-table-cell")}if(settings.ShowNote){if(settings.ShowNoteOnMobile){$("#rosterNoteColumn").removeClass("d-md-table-cell");$("#rosterNoteColumn").addClass("d-sm-table-cell")}else{$("#rosterNoteColumn").removeClass("d-sm-table-cell");$("#rosterNoteColumn").addClass("d-md-table-cell")}}else{$("#rosterNoteColumn").removeClass("d-sm-table-cell");$("#rosterNoteColumn").removeClass("d-md-table-cell")}if(settings.ShowDistricts){if(settings.ShowDistrictsOnMobile){$("#rosterDistrictColumn").removeClass("d-md-table-cell");$("#rosterDistrictColumn").addClass("d-sm-table-cell")}else{$("#rosterDistrictColumn").removeClass("d-sm-table-cell");$("#rosterDistrictColumn").addClass("d-md-table-cell")}}else{$("#rosterDistrictColumn").removeClass("d-sm-table-cell");$("#rosterDistrictColumn").removeClass("d-md-table-cell")}}function privateScoreSetPairsOrIndividualColumns(){$("#impHL").addClass("d-none");$("#impHS").addClass("d-none");$("#rosterDiv").addClass("d-none");if(settings.ShowLeads){$("#leadHL").removeClass("d-none");$("#leadHS").removeClass("d-none")}else{$("#leadHL").addClass("d-none");$("#leadHS").addClass("d-none")}}function privateScoreSetRoster(people){var html="";var index=1;people.forEach(function(person){if(person._pid.__type==="NoPid:#TournamentStructure")return;var names=getPlayerHtml(person);html+="<tr><td>".concat(index,"</td>");if(settings.ShowFirstAndLastName)html+="<td class=\"might-be-long-cell250\">".concat(names,"</td>");if(settings.ShowBboUsername)html+="<td class=\"d-none d-md-table-cell"+" align-middle text-center text-center\">".concat(person._bboUsername,"</td>");if(settings.ShowDistricts)html+="<td class=\"d-none "+(settings.ShowDistrictsOnMobile?"d-sm-table-cell":"d-md-table-cell")+" align-middle text-center text-center\">".concat(person._state,"</td>");if(settings.ShowRank)html+="<td class=\"d-none "+(settings.ShowRankOnMobile?"d-sm-table-cell":"d-md-table-cell")+" text-center\">"+"".concat(person._wk,"</td>");if(settings.ShowInfo)html+="<td class=\"d-none "+(settings.ShowInfoOnMobile?"d-sm-table-cell":"d-md-table-cell")+" text-center\">"+"".concat(personToInfo(person),"</td>");if(settings.ShowClubs)html+="<td class=\"d-none d-md-table-cell align-middle might-be-long-cell\">".concat(person._club,"</td>");if(settings.ShowNote)html+="<td class=\"d-none "+(settings.ShowNoteOnMobile?"d-sm-table-cell":"d-md-table-cell")+" align-middle might-be-long-cell\">".concat(person._resultNote,"</td>");html+="</tr>";index++});$("#rosterBody").html(html)}function setPrivateScoreNextSitting(nextSitting){if(settings.ShowNextPositionInPrivateScores!==0&&nextSitting!==null){var position=nextSitting.Table;if(settings.TournamentType===2){position+="/".concat(nextSitting.TableClosed)}position+=" ";if(settings.TournamentType===2){position+=nextSitting.HostOrNs?language.hostBL:language.guestBL}else{position+=nextSitting.HostOrNs?language.nsBL:language.ewBL}$("#contentHnextSittingPosition").text(position);$("#contentHnextSittingNextSittingSessionNumber").text(nextSitting.Session);$("#contentHnextSittingNextSittingRoundNumber").text(nextSitting.Round);$("#contentHnextSitting").removeClass("d-none")}else{$("#contentHnextSitting").addClass("d-none")}}function onLoadingPrivateScoreFail(){if(privateScoreLoaded!==hashData.participant){$("#alertH").html("<div class=\"alert alert-info\" role=\"alert\">"+language.fetchingPrivateScoreFailed+"</div>");$("#alertH").removeClass("d-none");$("#pairH").addClass("d-none");$("#tableH").addClass("d-none");$("#formH").removeClass("d-none");$("#historyFormHeader").removeClass("d-none")}}function setPrivateScoreContentLazy(){if(privateScoreLoaded===hashData.participant&&!settings.LiveResults)return $.when();if(hashData.participant===0){$("#alertH").addClass("d-none");$("#pairH").addClass("d-none");$("#tableH").addClass("d-none");$("#formH").removeClass("d-none");$("#historyFormHeader").removeClass("d-none");return $.when()}if(!settings.AvailablePrivateScores.includes(hashData.participant)){onLoadingPrivateScoreFail();return $.when()}if(settings.TournamentType===2){privateScoreSetTeamsColumns()}else{privateScoreSetPairsOrIndividualColumns()}if(settings.ShowTwoResults){$("#vpHL").removeClass("d-none");$("#vpHS").removeClass("d-none")}else{$("#vpHL").addClass("d-none");$("#vpHS").addClass("d-none")}var histJson="./h".concat(hashData.participant,".json");return $.getJSON(histJson).done(function(json){var privateScore=json;setPrivateScoreHeader(privateScore.Participant);var showAdjustments=privateScore.Rounds.some(function(value){return value.AdjustmentsSum!==0});var segmentsMax=Math.max.apply(Math,privateScore.Rounds.map(function(o){return o.SegmentsResults===null?0:o.SegmentsResults.length}));if(segmentsMax===1)segmentsMax=0;if(!showAdjustments||settings.TournamentType!==2){$("#adjHL").addClass("d-none");$("#adjHS").addClass("d-none")}$(".segHL").remove();$(".segHS").remove();if(settings.TournamentType===2){var _loop=function _loop(i){var segmentHtml=function segmentHtml(class_){return"<th rowspan=\"2\" scope=\"col\" class=\"align-middle text-center ".concat(class_,"\">")+"".concat(language.segment," ").concat(i,"</th>")};$("#histThL").find("th").eq(8).after(segmentHtml("segHL"));$("#histThS").find("th").eq(6).after(segmentHtml("segHS"))};for(var i=segmentsMax;i>0;i--){_loop(i)}}if(settings.TournamentType===2){privateScoreSetRoster(privateScore.Participant._people)}var columnsSmall=settings.TournamentType===2?segmentsMax+1+(settings.ShowTwoResults?1:0)+(showAdjustments?1:0):8-(settings.ShowLeads?0:1);var columnsBig=settings.TournamentType===2?segmentsMax+3+(settings.ShowTwoResults?1:0)+(showAdjustments?1:0):11-(settings.ShowLeads?0:1);var carryOverHtml=privateScore.CarryOverSum!==0?"<tr class=\"font-weight-bold\">"+"<td colspan=\"".concat(columnsSmall,"\" class=\"text-right d-md-none\">")+language.carryOverPrivateScore+":</td>"+"<td colspan=\"".concat(columnsBig,"\" class=\"text-right d-none d-md-table-cell\">")+language.carryOverPrivateScore+":</td> <td class=\"text-right\">"+"".concat(exactlyNPlaces(privateScore.CarryOverSum,settings.ResultsPresentationPrecision),"</td></tr>"):"";var html=carryOverHtml;$.each(privateScore.Rounds,function(index,privateScoreRound){html+=createPrivateScoreRow(privateScoreRound,showAdjustments,segmentsMax)});var teamsAdjustmentHtml=showAdjustments&&settings.TournamentType!==2?"<tr>"+"<td colspan=\"".concat(columnsSmall,"\" class=\"text-right d-md-none\">+/-:</td>")+"<td colspan=\"".concat(columnsBig,"\" class=\"text-right d-none d-md-table-cell\">+/-:</td>")+"<td class=\"text-right\">".concat(getAdjustments(settings.ResultsPresentationPrecision,privateScore.AdjustmentsSum,privateScore.Adjustments),"</td></tr>"):"";var remainingBoardsHtml=privateScore.RemainingBoardsNumber!==0?"<tr>"+"<td colspan=\"".concat(columnsSmall,"\" class=\"text-right d-md-none\">")+language.resultRemainingBoards+" (".concat(privateScore.RemainingBoardsNumber,"):</td>")+"<td colspan=\"".concat(columnsBig,"\" class=\"text-right d-none d-md-table-cell\">")+language.resultRemainingBoards+" (".concat(privateScore.RemainingBoardsNumber,"):</td>")+"<td class=\"text-right\">".concat(exactlyNPlaces(privateScore.RemainingBoardsScore,settings.ResultsPresentationPrecision),"</td></tr>"):"";var resultHtml="<tr class=\"font-weight-bold\">"+"<td colspan=\"".concat(columnsSmall,"\" class=\"text-right d-md-none\">").concat(language.resultPrivateScore,":</td>")+"<td colspan=\"".concat(columnsBig,"\" class=\"text-right d-none d-md-table-cell\">").concat(language.resultPrivateScore,":</td>")+"<td class=\"text-right\">".concat(exactlyNPlaces(privateScore.Result,settings.ResultsPresentationPrecision),"</td></tr>");var congressClassificationPointsHtml=(privateScore.ClassificationPoints!==0?"<span class=\"mr-3\">".concat(language.classificationColumn,": ").concat(privateScore.ClassificationPoints,"</span>"):"")+(privateScore.CongressPoints!==0?"<span class=\"mr-5\">".concat(language.congressColumn,": ").concat(privateScore.CongressPoints,"</span>"):"")+"".concat(language.placePrivateScore,":");var congressClassificationPointsAndPlaceHtml="<tr class=\"font-weight-bold\">"+"<td colspan=\"".concat(columnsSmall,"\" class=\"text-right d-md-none\">")+congressClassificationPointsHtml+"</td>"+"<td colspan=\"".concat(columnsBig,"\" class=\"text-right d-none d-md-table-cell\">")+congressClassificationPointsHtml+"</td>"+"<td class=\"text-right\">".concat(privateScore.Place,"</td></tr>");html+=teamsAdjustmentHtml+remainingBoardsHtml+resultHtml+congressClassificationPointsAndPlaceHtml;$("#hBody").html(html);setPrivateScoreNextSitting(privateScore.NextSitting);$("tr[data-participants*='|".concat(hashData.followed,"|']")).addClass("table-primary");$("#alertH").addClass("d-none");$("#pairH").removeClass("d-none");$("#tableH").removeClass("d-none");$("#formH").addClass("d-none");$("#historyFormHeader").addClass("d-none");privateScoreLoaded=hashData.participant})["catch"](function(){onLoadingPrivateScoreFail()})}function setPrivateScoreHeader(participant){var html="";switch(settings.TournamentType){case 0:{html="".concat(participant.Number,". ")+pairToHtml(participant,false);break}case 1:{html="".concat(participant.Number,". ")+getPlayerHtml(participant._person,true);break}case 2:{html="".concat(participant.Number,". ").concat(participant._name);break}}$("#pairH").html(html)}function getPrivateScoreRoundPlayers(privateScoreRound){var playersTop="";var playersLeft="";switch(settings.TournamentType){case 0:{var prefix="<div class=\"align-middle text-left clickable\">";var suffix=pairToHtml(privateScoreRound.Opponents[0],true)+"</div>";playersTop=participantNumberLink(prefix+"".concat(privateScoreRound.Round,". ")+suffix,privateScoreRound.Opponents[0].Number);playersLeft=participantNumberLink(prefix+suffix,privateScoreRound.Opponents[0].Number);break}case 1:{var participantHtml=function participantHtml(participant){return participantNumberLink("<div class=\"d-inline-block align-middle text-left clickable\">"+getPlayerHtml(participant._person,true,false,false)+"<span class=\"small\"> (".concat(participant.Number,")</span></div>"),participant.Number)};playersLeft="* - ".concat(participantHtml(privateScoreRound.Partner)," | ")+"".concat(participantHtml(privateScoreRound.Opponents[0])," - ").concat(participantHtml(privateScoreRound.Opponents[1]));playersTop="".concat(privateScoreRound.Round,". ")+playersLeft;break}case 2:{playersLeft=teamToHtmlWithFlag(privateScoreRound.Opponents[0],true,false);playersTop="".concat(privateScoreRound.Round,". ")+playersLeft;break}}var dataParticipants="";switch(settings.TournamentType){case 0:case 2:{dataParticipants="|".concat(privateScoreRound.Opponents[0].Number,"|");break}case 1:{dataParticipants="|".concat(privateScoreRound.Partner.Number,"|")+"".concat(privateScoreRound.Opponents[0].Number,"|").concat(privateScoreRound.Opponents[1].Number,"|");break}}return[playersTop,playersLeft,dataParticipants]}function createPrivateScoreRow(privateScoreRound,showAdjustments,segmentsMax){var _getPrivateScoreRound=getPrivateScoreRoundPlayers(privateScoreRound),_getPrivateScoreRound2=_slicedToArray(_getPrivateScoreRound,3),playersTop=_getPrivateScoreRound2[0],playersLeft=_getPrivateScoreRound2[1],dataParticipants=_getPrivateScoreRound2[2];var html="";var segmentsCount=segmentsMax>1?segmentsMax:0;var tableWidthColspan=settings.TournamentType===2?2+(showAdjustments?1:0)+(settings.ShowTwoResults?1:0)+segmentsCount:9-(settings.ShowLeads?0:1);html+="<tr class=\"d-md-none font-weight-bold\" data-participants=\"".concat(dataParticipants,"\">")+"<td style=\"text-nowrap\" colspan=\"".concat(tableWidthColspan,"\">")+"".concat(playersTop,"</td></tr>");var roundHeader=settings.TournamentType===2?roundResultsLink(privateScoreRound.Round.toString(),privateScoreRound.Session,privateScoreRound.Round):privateScoreRound.Round;var roundHeaderRowSpan=settings.TournamentType===2?1:privateScoreRound.Scores.length===0?1:privateScoreRound.Scores.length;html+="<tr data-participants=\"".concat(dataParticipants,"\">")+"<td class=\"align-middle text-center d-none d-md-table-cell\" rowspan=".concat(roundHeaderRowSpan,">")+roundHeader+"</td>"+"<td class=\"align-middle d-none d-md-table-cell\" rowspan=".concat(roundHeaderRowSpan,">").concat(playersLeft,"</td>");switch(settings.TournamentType){case 0:case 1:{$.each(privateScoreRound.Scores,function(index,score){var showScore=score.Score.__type==="PointScore:#CalculatingEngine";var showDetails=showScore&&score.Score.Height!==0;var contract=contractHtml(score.Score,score.Bidding);var tricks="";var declarer="";var lead="";var scoreNumber="";if(showDetails){tricks=tricksHtml(score.Score.Overtricks,score.Play);declarer=declarerHtml(score.Score.Declarer);lead=leadHtml(score.Score.Lead)}if(showScore)scoreNumber=score.Score.Score.toString();var scorePositionClass=score.Score.Score>0?"text-left":score.Score.Score===0?"text-center":"text-right";var scoreWe=showScore&&score.Score.Score>0?score.Score.Score:"";var scoreOpponents=showScore&&score.Score.Score<0?-1*score.Score.Score:"";if(Number(index)>0){html+="<tr data-participants=\"".concat(dataParticipants,"\">")}html+="<td class=\"align-middle text-center\">"+protocolNumberLink("<div class=\"align-middle text-center clickable\">"+"".concat(score.BoardAsPlayed,"</div>"),score.Board)+"</td>"+"<td class=\"align-middle text-center\">".concat(score.Line,"</td>")+"<td class=\"align-middle text-center text-nowrap\">".concat(contract,"</td>")+"<td class=\"align-middle text-center\">".concat(declarer,"</td>")+(settings.ShowLeads?"<td class=\"align-middle text-center text-nowrap\">".concat(lead,"</td>"):"")+"<td class=\"align-middle text-right\">".concat(tricks,"</td>")+"<td class=\"align-middle ".concat(scorePositionClass," d-md-none\">").concat(scoreNumber,"</td>")+"<td class=\"align-middle text-right d-none d-md-table-cell\">".concat(scoreWe,"</td>")+"<td class=\"align-middle text-right d-none d-md-table-cell\">".concat(scoreOpponents,"</td>")+"<td class=\"align-middle text-right\">".concat(exactlyNPlaces(score.Result,2),"</td>")+"<td class=\"align-middle text-right smaller\">"+"".concat(exactlyNPlaces(score.ResultAfterScore,settings.ResultsPresentationPrecision),"</td>");html+="</tr>"});break}case 2:{if(privateScoreRound.SegmentsResults.length>1){$.each(privateScoreRound.SegmentsResults,function(index,segment){html+="<td class=\"align-middle ".concat(segment.Live?"table-primary":""," text-center\">")+segmentLink(settings.ShowTwoResults?"".concat(atMostTwoPlaces(segment.Result1We)," - ").concat(atMostTwoPlaces(segment.Result1Opponents)," | ")+"".concat(atMostTwoPlaces(segment.Result2We)," - ").concat(atMostTwoPlaces(segment.Result2Opponents)):"".concat(atMostTwoPlaces(segment.Result1We)," - ").concat(atMostTwoPlaces(segment.Result1Opponents)),privateScoreRound.Session,privateScoreRound.Round,Number(index),privateScoreRound.Table)+"</td>"})}for(var i=0;i<segmentsMax-privateScoreRound.SegmentsResults.length;i++){html+="<td></td>"}var roundResultHtml=settings.ShowTwoResults?"".concat(atMostTwoPlaces(privateScoreRound.ResultWe1)," - ").concat(atMostTwoPlaces(privateScoreRound.ResultOpponents1)," | ")+"".concat(atMostTwoPlaces(privateScoreRound.ResultWe2)," - ").concat(atMostTwoPlaces(privateScoreRound.ResultOpponents2)):"".concat(atMostTwoPlaces(privateScoreRound.ResultWe1)," - ").concat(atMostTwoPlaces(privateScoreRound.ResultOpponents1));if(privateScoreRound.SegmentsResults.length===1){roundResultHtml=segmentLink(roundResultHtml,privateScoreRound.Session,privateScoreRound.Round,0,privateScoreRound.Table)}html+="<td class=\"align-middle text-center\">"+roundResultHtml+"</td>";if(settings.ShowTwoResults){html+="<td class=\"align-middle text-center\">"+atMostNPlaces(privateScoreRound.Result1,settings.ResultsPresentationPrecision)+"</td>"}if(showAdjustments)html+="<td class=\"align-middle text-center\">"+getAdjustments(settings.ResultsPresentationPrecision,privateScoreRound.AdjustmentsSum,privateScoreRound.Adjustments)+"</td>";html+="<td class=\"align-middle text-center\">"+atMostNPlaces(privateScoreRound.Result,settings.ResultsPresentationPrecision)+"</td>";html+="</tr>";break}}return html}
"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e3){didErr=true;err=_e3},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var boardLoaded=-1;function onProtocolLoadFail(boardToLoad,appendToId){if(boardLoaded!==boardToLoad){$("#alertB").html("<div class=\"alert alert-info\" role=\"alert\">"+language.fetchingBoardFailed+"</div>");$("#alertB").removeClass("d-none");var _iterator=_createForOfIteratorHelper(Array(100).keys()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var x=_step.value;var contentToRemove=$("#".concat(appendToId,"_contentB").concat(x));if(contentToRemove!==null&&typeof contentToRemove!=="undefined")contentToRemove.addClass("d-none")}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}function setProtocolContentLazy(boardToLoad,settings,includeLinks){var appendToId=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"tabB";if(boardToLoad===null){if(hashData.leftView===LeftView.Segment&&boardsAvailableInSegment.length>0&&!boardsAvailableInSegment.includes(hashData.board)){boardToLoad=boardsAvailableInSegment[0]}else{boardToLoad=hashData.board}}if(boardLoaded===boardToLoad&&!settings.LiveResults)return $.when();if(!settings.BoardsNumbers.includes(boardToLoad)){onProtocolLoadFail(boardToLoad,appendToId);return $.when()}if(settings.TournamentType===2){$("#tableBL").removeClass("d-none");$("#hostBL").removeClass("d-none");$("#guestBL").removeClass("d-none");$("#tableBS").removeClass("d-none");$("#hostBS").removeClass("d-none");$("#guestBS").removeClass("d-none");$("#nsBL").addClass("d-none");$("#ewBL").addClass("d-none");$("#nsBS").addClass("d-none");$("#ewBS").addClass("d-none");$("#resultBL").addClass("d-none");$("#resultBS").addClass("d-none");$("#resultNsBL").addClass("d-none");$("#resultEwBL").addClass("d-none")}if(settings.ShowLeads){$("#leadBL").removeClass("d-none");$("#leadBS").removeClass("d-none")}else{$("#leadBL").addClass("d-none");$("#leadBS").addClass("d-none")}if(settings.ShowButler){$("#indBL").removeClass("d-none");$("#indBS").removeClass("d-none")}else{$("#indBL").addClass("d-none");$("#indBS").addClass("d-none")}var protocolJson="./p".concat(boardToLoad,".json");return $.getJSON(protocolJson).done(function(json){var protocol=json;protocol.ScoringGroups.forEach(function(scoringGroup,index){return setScoringGroupContent(scoringGroup,index,boardToLoad,settings,appendToId,includeLinks)});var _iterator2=_createForOfIteratorHelper(Array.from(Array(100).keys()).filter(function(index){return protocol.ScoringGroups.length<=index})),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var x=_step2.value;var contentToRemove=$("#".concat(appendToId,"_contentB").concat(x));if(contentToRemove!==null&&typeof contentToRemove!=="undefined")contentToRemove.addClass("d-none")}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}boardLoaded=boardToLoad})["catch"](function(){onProtocolLoadFail(boardToLoad,appendToId)})}function addNewContentB(sgIndex,appendToId){var contentB=$("#contentB").clone();contentB.attr("id","".concat(appendToId,"_contentB").concat(sgIndex));contentB.removeClass("d-none");contentB.find("#sgBody").attr("id","".concat(appendToId,"_sgBody").concat(sgIndex));contentB.find("#contentD").attr("id","".concat(appendToId,"_contentD").concat(sgIndex));contentB.find("#miniMaxContainer").attr("id","".concat(appendToId,"_miniMaxContainer").concat(sgIndex));contentB.find("#eCards").attr("id","".concat(appendToId,"_eCards").concat(sgIndex));contentB.find("#wCards").attr("id","".concat(appendToId,"_wCards").concat(sgIndex));contentB.find("#nCards").attr("id","".concat(appendToId,"_nCards").concat(sgIndex));contentB.find("#sCards").attr("id","".concat(appendToId,"_sCards").concat(sgIndex));contentB.find("#tricksNsSmall").attr("id","".concat(appendToId,"_tricksNsSmall").concat(sgIndex));contentB.find("#tricksNsLarge").attr("id","".concat(appendToId,"_tricksNsLarge").concat(sgIndex));contentB.find("#tricksEwSmall").attr("id","".concat(appendToId,"_tricksEwSmall").concat(sgIndex));contentB.find("#tricksEwLarge").attr("id","".concat(appendToId,"_tricksEwLarge").concat(sgIndex));contentB.find("#tableHcp").attr("id","".concat(appendToId,"_tableHcp").concat(sgIndex));contentB.find("#hcpNorth").attr("id","".concat(appendToId,"_hcpNorth").concat(sgIndex));contentB.find("#hcpWest").attr("id","".concat(appendToId,"_hcpWest").concat(sgIndex));contentB.find("#hcpEast").attr("id","".concat(appendToId,"_hcpEast").concat(sgIndex));contentB.find("#hcpSouth").attr("id","".concat(appendToId,"_hcpSouth").concat(sgIndex));contentB.find("#bTitle").attr("id","".concat(appendToId,"_bTitle").concat(sgIndex));contentB.find("#bImage").attr("id","".concat(appendToId,"_bImage").concat(sgIndex));contentB.find("#beginBoardIndicator").attr("id","".concat(appendToId,"_beginBoardIndicator").concat(sgIndex));contentB.find("#copyToClipboardTooltip").attr("id","".concat(appendToId,"_copyToClipboardTooltip").concat(sgIndex));contentB.find("#copyToClipboardLink").attr("id","".concat(appendToId,"_copyToClipboardLink").concat(sgIndex));contentB.find("#copyToClipboardLink".concat(sgIndex)).attr("onclick","".concat(appendToId,"_copyBoardToClipboard(").concat(sgIndex,");"));if(sgIndex!==0){contentB.find("#fetchBoardByNumber").remove();contentB.find("#noBoardInfo").remove()}else{contentB.find("#noBoardInfo").attr("id","".concat(appendToId,"_noBoardInfo"));contentB.find("#bTitleSecondary").attr("id","".concat(appendToId,"_bTitleSecondary"))}contentB.appendTo("#".concat(appendToId));if($("#boardToCopy".concat(sgIndex)).length===0){var boardToCopy0=$("#boardToCopy").clone();boardToCopy0.attr("id","boardToCopy".concat(sgIndex));boardToCopy0.find("#miniMaxContainerToCopy").attr("id","miniMaxContainerToCopy".concat(sgIndex));boardToCopy0.find("#eCardsToCopy").attr("id","eCardsToCopy".concat(sgIndex));boardToCopy0.find("#wCardsToCopy").attr("id","wCardsToCopy".concat(sgIndex));boardToCopy0.find("#nCardsToCopy").attr("id","nCardsToCopy".concat(sgIndex));boardToCopy0.find("#sCardsToCopy").attr("id","sCardsToCopy".concat(sgIndex));boardToCopy0.find("#tricksNsSmallToCopy").attr("id","tricksNsSmallToCopy".concat(sgIndex));boardToCopy0.find("#tricksEwSmallToCopy").attr("id","tricksEwSmallToCopy".concat(sgIndex));boardToCopy0.find("#bTitleToCopy").attr("id","bTitleToCopy".concat(sgIndex));boardToCopy0.find("#bImageToCopy").attr("id","bImageToCopy".concat(sgIndex));boardToCopy0.appendTo("#myBody")}}function setScoringGroupContent(scoringGroup,sgIndex,boardToLoad,settings,appendToId,includeLinks){if($("#".concat(appendToId,"_contentB").concat(sgIndex)).length===0){addNewContentB(sgIndex,appendToId)}$("#".concat(appendToId,"_bTitleSecondary")).html("BOARD ".concat(boardToLoad));setScoringGroupScores(scoringGroup,sgIndex,settings,appendToId,includeLinks);setScoringGroupDistribution(scoringGroup.Distribution,sgIndex,settings.ShowHcpInHands,settings.ShowContractsNotTricks,appendToId)}function getScoringGroupScoreParticipants(scoreResult,allScores,lastTable,scoreIndex,settings,includeLinks){var participantNs="";var participantEw="";function participant(participant,inline){if(!includeLinks)return participant.Number.toString();else return participantToNumberWithTooltipHtml(participant,inline)}switch(settings.TournamentType){case 0:participantNs="<td class=\"align-middle text-center\">"+participant(scoreResult.ParticipantsNs[0],false)+"</td>";participantEw="<td class=\"align-middle text-center\">"+participant(scoreResult.ParticipantsEw[0],false)+"</td>";break;case 1:participantNs="<td class=\"align-middle text-center text-nowrap\">"+participant(scoreResult.ParticipantsNs[0],true)+" - "+participant(scoreResult.ParticipantsNs[1],true)+"</td>";participantEw="<td class=\"align-middle text-center text-nowrap\">"+participant(scoreResult.ParticipantsEw[0],true)+" - "+participant(scoreResult.ParticipantsEw[1],true)+"</td>";break;case 2:if(lastTable!==scoreResult.Table){var rowspan=1;for(var i=Number(scoreIndex)+1;i<allScores.length;i++){if(allScores[i].Table===scoreResult.Table)rowspan++}participantNs="<td class=\"align-middle text-center\" rowspan=\"".concat(rowspan,"\">")+participant(scoreResult.Host,false)+"</td>";participantEw="<td class=\"align-middle text-center\" rowspan=\"".concat(rowspan,"\">")+participant(scoreResult.Guest,false)+"</td>"}break;}return[participantNs,participantEw]}function setScoringGroupScores(scoringGroup,sgIndex,settings,parentId,includeLinks){var scoresTable="";var lastTable="";var scores=scoringGroup.Scores;$.each(scores,function(scoreIndex,scoreResult){var _scoreToContractAndTr=scoreToContractAndTricksAndShowScoreAndShowDetails(scoreResult),_scoreToContractAndTr2=_slicedToArray(_scoreToContractAndTr,4),contract=_scoreToContractAndTr2[0],tricks=_scoreToContractAndTr2[1],showScore=_scoreToContractAndTr2[2],showDetails=_scoreToContractAndTr2[3];var dataParticipants="|";scoreResult.ParticipantsNs.forEach(function(participant){return dataParticipants+="".concat(participant.Number,"|")});scoreResult.ParticipantsEw.forEach(function(participant){return dataParticipants+="".concat(participant.Number,"|")});dataParticipants="<tr data-participants=\"".concat(dataParticipants,"\">");var _getScoringGroupScore=getScoringGroupScoreParticipants(scoreResult,scores,lastTable,scoreIndex,settings,includeLinks),_getScoringGroupScore2=_slicedToArray(_getScoringGroupScore,2),participantNs=_getScoringGroupScore2[0],participantEw=_getScoringGroupScore2[1];var table="";if(settings.TournamentType===2&&lastTable!==scoreResult.Table){var rowspan=1;for(var i=Number(scoreIndex)+1;i<scores.length;i++){if(scores[i].Table===scoreResult.Table)rowspan++}table="<td class=\"align-middle text-center\" rowspan=\"".concat(rowspan,"\">")+(includeLinks?segmentLink(scoreResult.TableToShow,scoreResult.Session,scoreResult.Round,scoreResult.Segment,scoreResult.Table):scoreResult.TableToShow)+"</td>";lastTable=scoreResult.Table}var declarer="";var lead="";if(showDetails){declarer=declarerHtml(scoreResult.NsScore.Declarer);lead=leadHtml(scoreResult.NsScore.Lead)}var butler=settings.ShowButler?"<td class=\"align-middle text-center\">"+(scoreResult.NsIndividualTeams===-scoreResult.EwIndividualTeams?atMostTwoPlaces(scoreResult.NsIndividualTeams):"".concat(atMostTwoPlaces(scoreResult.NsIndividualTeams),"/")+"".concat(atMostTwoPlaces(scoreResult.EwIndividualTeams)))+"</td>":"";scoresTable+=dataParticipants+table+participantNs+participantEw+"<td class=\"align-middle text-center text-nowrap\">".concat(contract,"</td>")+"<td class=\"align-middle text-center\">".concat(declarer,"</td>")+(settings.ShowLeads?"<td class=\"align-middle text-center text-nowrap\">".concat(lead,"</td>"):"")+"<td class=\"align-middle text-right\">".concat(tricks,"</td>")+"<td class=\"align-middle ".concat(showDetails&&scoreResult.NsScore.Score>0?"text-left":showDetails&&scoreResult.NsScore.Score===0?"text-center":"text-right"," d-md-none\">").concat(showScore?scoreResult.NsScore.Score:"","</td>")+"<td class=\"align-middle text-right d-none d-md-table-cell\">".concat(showScore&&scoreResult.NsScore.Score>0?scoreResult.NsScore.Score:"","</td>")+"<td class=\"align-middle text-right d-none d-md-table-cell\">".concat(showScore&&scoreResult.NsScore.Score<0?-1*scoreResult.NsScore.Score:"","</td>")+(settings.TournamentType!==2?"<td class=\"align-middle text-right\">".concat(exactlyNPlaces(scoreResult.NsResult,2),"</td>")+"<td class=\"align-middle text-right\">".concat(exactlyNPlaces(scoreResult.EwResult,2),"</td>"):"")+butler+"</tr>"});if(settings.ShowBoardAverage){var datum=scoringGroup.NsAverage===-scoringGroup.EwAverage?"".concat(scoringGroup.NsAverage):"".concat(scoringGroup.NsAverage,"/").concat(-scoringGroup.EwAverage);scoresTable+="<tr><td colspan=\"6\" class=\"align-middle text-right\">".concat(language.datum,":</td>")+"<td colspan=\"2\" class=\"align-middle text-center d-none d-md-table-cell\">".concat(datum,"</td>")+"<td class=\"align-middle text-center d-md-none\">".concat(datum,"</td>")+"<td colspan=\"2\" class=\"align-middle text-center\"></td></tr>"}$("#".concat(parentId,"_sgBody").concat(sgIndex)).html(scoresTable);$("#alertB").addClass("d-none");$("#".concat(parentId,"_contentB").concat(sgIndex)).attr("data-scoringGroup",scoringGroup.Number);$("#".concat(parentId,"_contentB").concat(sgIndex)).removeClass("d-none")}var colorsPics={"nt":"<img class=\"table-img\" src=\"".concat(primaryPath,"notrump.gif\" onerror=\"imgError(this, 'notrump.gif');\">"),"s":"<img class=\"table-img\" src=\"".concat(primaryPath,"spades.gif\" onerror=\"imgError(this, 'spades.gif');\">"),"h":"<img class=\"table-img\" src=\"".concat(primaryPath,"hearts.gif\" onerror=\"imgError(this, 'hearts.gif');\">"),"d":"<img class=\"table-img\" src=\"".concat(primaryPath,"diamonds.gif\" onerror=\"imgError(this, 'diamonds.gif');\">"),"c":"<img class=\"table-img\" src=\"".concat(primaryPath,"clubs.gif\" onerror=\"imgError(this, 'clubs.gif');\">")};function parseMiniMax(miniMax){if(miniMax==="PASS")return miniMax;var miniMaxNew;$.each(colorsPics,function(colorCode,v){miniMaxNew=miniMax.replace(colorCode,v);if(miniMaxNew.localeCompare(miniMax)===-1)return false;return true});return miniMaxNew}function handDescription(hand){return"".concat(colorsPics["s"]).concat(hand.Spades,"<br>")+"".concat(colorsPics["h"]).concat(hand.Hearts,"<br>")+"".concat(colorsPics["d"]).concat(hand.Diamonds,"<br>")+"".concat(colorsPics["c"]).concat(hand.Clubs)}function tricksToText(tricks,showContractsNotTricks){return tricks<(showContractsNotTricks?1:0)?"":tricks}function tricksDescription(handRecord,hands,showContractsNotTricks){var tricks="<table class=\"table table-sm mb-0\">"+"<thead>"+"<tr>"+"<th scope=\"col\" class=\"align-middle text-center\"></th>"+"<th scope=\"col\" class=\"align-middle text-center\">".concat(colorsPics["nt"],"</th>")+"<th scope=\"col\" class=\"align-middle text-center\">".concat(colorsPics["s"],"</th>")+"<th scope=\"col\" class=\"align-middle text-center\">".concat(colorsPics["h"],"</th>")+"<th scope=\"col\" class=\"align-middle text-center\">".concat(colorsPics["d"],"</th>")+"<th scope=\"col\" class=\"align-middle text-center\">".concat(colorsPics["c"],"</th>")+"</tr>"+"</thead>"+"<tbody>";$.each(hands,function(i,hand){var tricksField="TricksFrom"+hand;var cell=function cell(hand){return"<td class=\"text-center\">".concat(tricksToText(hand,showContractsNotTricks),"</td>")};tricks+="<tr>"+"<td>".concat(hand,"</td>")+cell(handRecord[tricksField].Nt)+cell(handRecord[tricksField].Spades)+cell(handRecord[tricksField].Hearts)+cell(handRecord[tricksField].Diamonds)+cell(handRecord[tricksField].Clubs)+"</tr>"});tricks+="</tbody></table>";return tricks}var vulnerabilities=["BB","AB","BA","AA"];var vulnerabilitiesHuman=["None","NS","EW","All"];var declarers=["N","S","W","E"];function declarerHtml(declarer){if(typeof declarer==="undefined"){return""}return declarers[declarer]}function setScoringGroupDistribution(distribution,sgIndex,showHcpInHands,showContractsNotTricks,parentId){if(distribution===null||distribution._handRecord===null){if(sgIndex===0)$("#".concat(parentId,"_noBoardInfo")).removeClass("d-none");$("#".concat(parentId,"_miniMaxContainer").concat(sgIndex)).addClass("d-none");$("#".concat(parentId,"_contentD").concat(sgIndex)).addClass("d-none");return}var handRecord=distribution._handRecord;var showMiniMax=handRecord.MiniMax!=="";if(showMiniMax){$("#".concat(parentId,"_tricksNsSmall").concat(sgIndex)).removeClass("d-none");$("#".concat(parentId,"_tricksEwSmall").concat(sgIndex)).removeClass("d-none");$("#tricksNsSmallToCopy".concat(sgIndex)).removeClass("d-none");$("#tricksEwSmallToCopy".concat(sgIndex)).removeClass("d-none");$("#".concat(parentId,"_tricksNsLarge").concat(sgIndex)).removeClass("d-none");$("#".concat(parentId,"_tricksEwLarge").concat(sgIndex)).removeClass("d-none");$("#".concat(parentId,"_miniMaxContainer").concat(sgIndex)).removeClass("d-none");$("#miniMaxContainerToCopy".concat(sgIndex)).removeClass("d-none")}else{$("#".concat(parentId,"_tricksNsSmall").concat(sgIndex)).addClass("d-none");$("#".concat(parentId,"_tricksEwSmall").concat(sgIndex)).addClass("d-none");$("#tricksNsSmallToCopy".concat(sgIndex)).addClass("d-none");$("#tricksEwSmallToCopy".concat(sgIndex)).addClass("d-none");$("#".concat(parentId,"_tricksNsLarge").concat(sgIndex)).addClass("d-none");$("#".concat(parentId,"_tricksEwLarge").concat(sgIndex)).addClass("d-none");$("#".concat(parentId,"_miniMaxContainer").concat(sgIndex)).addClass("d-none");$("#miniMaxContainerToCopy".concat(sgIndex)).addClass("d-none")}var miniMaxHtml=parseMiniMax("Minimax: ".concat(handRecord.MiniMax));var eCardsHtml=handDescription(handRecord.HandE);var wCardsHtml=handDescription(handRecord.HandW);var nCardsHtml=handDescription(handRecord.HandN);var sCardsHtml=handDescription(handRecord.HandS);var tricksNs=tricksDescription(handRecord,["N","S"],showContractsNotTricks);var tricksEw=tricksDescription(handRecord,["W","E"],showContractsNotTricks);$("#".concat(parentId,"_miniMaxContainer").concat(sgIndex)).html(miniMaxHtml);$("#".concat(parentId,"_eCards").concat(sgIndex)).html(eCardsHtml);$("#".concat(parentId,"_wCards").concat(sgIndex)).html(wCardsHtml);$("#".concat(parentId,"_nCards").concat(sgIndex)).html(nCardsHtml);$("#".concat(parentId,"_sCards").concat(sgIndex)).html(sCardsHtml);$("#".concat(parentId,"_tricksNsSmall").concat(sgIndex)).html(tricksNs);$("#".concat(parentId,"_tricksNsLarge").concat(sgIndex)).html(tricksNs);$("#".concat(parentId,"_tricksEwSmall").concat(sgIndex)).html(tricksEw);$("#".concat(parentId,"_tricksEwLarge").concat(sgIndex)).html(tricksEw);$("#miniMaxContainerToCopy".concat(sgIndex)).html(miniMaxHtml);$("#eCardsToCopy".concat(sgIndex)).html(eCardsHtml);$("#wCardsToCopy".concat(sgIndex)).html(wCardsHtml);$("#nCardsToCopy".concat(sgIndex)).html(nCardsHtml);$("#sCardsToCopy".concat(sgIndex)).html(sCardsHtml);$("#tricksNsSmallToCopy".concat(sgIndex)).html(tricksNs);$("#tricksEwSmallToCopy".concat(sgIndex)).html(tricksEw);if(showHcpInHands){$("#".concat(parentId,"_hcpNorth").concat(sgIndex)).html(handRecord.HandN.Hcp.toString());$("#".concat(parentId,"_hcpSouth").concat(sgIndex)).html(handRecord.HandS.Hcp.toString());$("#".concat(parentId,"_hcpEast").concat(sgIndex)).html(handRecord.HandE.Hcp.toString());$("#".concat(parentId,"_hcpWest").concat(sgIndex)).html(handRecord.HandW.Hcp.toString())}else{$("#".concat(parentId,"_hcpNorth").concat(sgIndex)).html("");$("#".concat(parentId,"_hcpSouth").concat(sgIndex)).html("");$("#".concat(parentId,"_hcpEast").concat(sgIndex)).html("");$("#".concat(parentId,"_hcpWest").concat(sgIndex)).html("")}var titleHtml="<h1 class=\"mb-0\">".concat(distribution._numberAsPlayed,"</h1>")+"".concat(vulnerabilitiesHuman[handRecord.Vulnerability]," / ").concat(declarers[handRecord._declarer]);$("#".concat(parentId,"_bTitle").concat(sgIndex)).html(titleHtml);$("#bTitleToCopy".concat(sgIndex)).html(titleHtml);var bImageFileName="board".concat(vulnerabilities[handRecord.Vulnerability]).concat(declarerHtml(handRecord._declarer));$("#".concat(parentId,"_bImage").concat(sgIndex)).html("<img class=\"img-fluid\" src=\"".concat(primaryPath).concat(bImageFileName,".png\" ")+"onerror=\"imgError(this, '".concat(bImageFileName,".png');\">"));$("#bImageToCopy".concat(sgIndex),"<img class=\"img-fluid\" width=\"77px\" src=\"".concat(primaryPath).concat(bImageFileName,"boardToCopy.png\" ")+"onerror=\"imgError(this, '".concat(bImageFileName,"boardToCopy.png');\">"));if(sgIndex===0)$("#".concat(parentId,"_noBoardInfo")).addClass("d-none");$("#".concat(parentId,"_miniMaxContainer").concat(sgIndex)).removeClass("d-none");$("#".concat(parentId,"_contentD").concat(sgIndex)).removeClass("d-none")}function copyBoardToClipboard(index){var copyText=document.getElementById("boardToCopy".concat(index));copyText.classList.remove("d-none");window.getSelection().removeAllRanges();var range=document.createRange();range.selectNode(copyText);window.getSelection().addRange(range);document.execCommand("copy");copyText.classList.add("d-none")}function setAllGreyOut(greyedOut){for(var _i2=0,_Array$from=Array.from(Array(100).keys());_i2<_Array$from.length;_i2++){var x=_Array$from[_i2];var content=$("#tabB_contentB".concat(x));if(content!==null&&typeof content!=="undefined")if(greyedOut)content.addClass("greyedOut");else content.removeClass("greyedOut")}if(!greyedOut){$("div[id^=\"tabB_contentB\"]").toArray().sort(function(a,b){var aIndex=$(a).attr("id").replace(/^tabB_contentB/,"");var bIndex=$(b).attr("id").replace(/^tabB_contentB/,"");return parseInt(aIndex)-parseInt(bIndex)}).forEach(function(element){var elem=$(element);elem.remove();$(elem).appendTo("#tabB")})}}function grayOutIfPresent(scoringGroup){var content=$("div[data-scoringGroup=\"".concat(scoringGroup,"\"]"))[0];if(content!==null&&typeof content!=="undefined"){setAllGreyOut(true);content.classList.remove("greyedOut");var elem=$(content);elem.remove();$(elem).prependTo("#tabB")}}function greyOutScoringGroups(){setAllGreyOut(false);if(hashData.leftView===LeftView.PrivateScore&&settings.AvailablePrivateScores.includes(hashData.participant)){var privateScoreJson="./h".concat(hashData.participant,".json");return $.getJSON(privateScoreJson).done(function(json){var privateScore=json;var toGreyOut=-1;$.each(privateScore.Rounds,function(index,privateScoreRound){$.each(privateScoreRound.Scores,function(index,privateScoreScore){if(privateScoreScore.Board===hashData.board)toGreyOut=privateScoreScore.ScoringGroup})});grayOutIfPresent(toGreyOut)})["catch"](function(){})}else if(hashData.leftView===LeftView.Segment&&roundResultIndex(hashData.session,hashData.round)!==-1&&settings.AvailableSegmentsTables.includes(hashData.table)){var segmentResultJson="./s".concat(hashData.table,"-").concat(hashData.session,"-").concat(hashData.round,"-").concat(hashData.segment,".json");return $.getJSON(segmentResultJson).done(function(json){var segmentResult=json;var toGreyOut=-1;$.each(segmentResult.Scores,function(index,segmentScoreJson){if(segmentScoreJson.Board===hashData.board)toGreyOut=segmentScoreJson.ScoringGroup});grayOutIfPresent(toGreyOut)})["catch"](function(){})}return $.when()}
"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var resultsLoaded=false;function resultsShowAndHideColumnsCommon(settings){var longTermClassificationOrNotTeams=typeof longTermClassification!=="undefined"||settings.TournamentType!==2;if(settings.ShowRank){if(settings.ShowRankOnMobile){$("#rankColumn").removeClass("d-md-table-cell");$("#rankColumn").addClass("d-sm-table-cell")}else{$("#rankColumn").removeClass("d-sm-table-cell");$("#rankColumn").addClass("d-md-table-cell")}}else{$("#rankColumn").removeClass("d-sm-table-cell");$("#rankColumn").removeClass("d-md-table-cell")}if(settings.ShowInfo&&longTermClassificationOrNotTeams){if(settings.ShowInfoOnMobile){$("#infoColumn").removeClass("d-md-table-cell");$("#infoColumn").addClass("d-sm-table-cell")}else{$("#infoColumn").removeClass("d-sm-table-cell");$("#infoColumn").addClass("d-md-table-cell")}}else{$("#infoColumn").removeClass("d-sm-table-cell");$("#infoColumn").removeClass("d-md-table-cell")}if(settings.ShowClubs&&longTermClassificationOrNotTeams){$("#clubColumn").addClass("d-md-table-cell")}else{$("#clubColumn").removeClass("d-md-table-cell")}if(settings.ShowDistricts&&longTermClassificationOrNotTeams){if(settings.ShowDistrictsOnMobile){$("#districtColumn").removeClass("d-md-table-cell");$("#districtColumn").addClass("d-sm-table-cell")}else{$("#districtColumn").removeClass("d-sm-table-cell");$("#districtColumn").addClass("d-md-table-cell")}}else{$("#districtColumn").removeClass("d-sm-table-cell");$("#districtColumn").removeClass("d-md-table-cell")}if(settings.ShowFirstAndLastName||typeof longTermClassification==="undefined"&&settings.TournamentType===2){$("#playersColumn").removeClass("d-none")}else{$("#playersColumn").addClass("d-none")}if(settings.ShowBboUsername&&longTermClassificationOrNotTeams){$("#bboUsernameColumn").addClass("d-md-table-cell")}else{$("#bboUsernameColumn").removeClass("d-md-table-cell")}if(settings.ShowClassificationPoints){$("#classificationColumn").addClass("d-sm-table-cell")}else{$("#classificationColumn").removeClass("d-sm-table-cell")}if(settings.ShowCongressPoints){$("#congressColumn").addClass("d-sm-table-cell")}else{$("#congressColumn").removeClass("d-sm-table-cell")}if(settings.ShowRewards){$("#rewardColumn").addClass("d-md-table-cell")}else{$("#rewardColumn").removeClass("d-md-table-cell")}if(settings.ShowRewardsDescriptions){$("#descriptionColumn").addClass("d-md-table-cell")}else{$("#descriptionColumn").removeClass("d-md-table-cell")}}function resultsShowAndHideColumns(){resultsShowAndHideColumnsCommon(settings);if(settings.ShowAdjustments){$("#adjustmentColumn").addClass("d-sm-table-cell")}else{$("#adjustmentColumn").removeClass("d-sm-table-cell")}if(settings.ShowCarryOver){$("#carryOverColumn").addClass("d-sm-table-cell");$("#sessionResultColumn").addClass("d-md-table-cell")}else{$("#carryOverColumn").removeClass("d-sm-table-cell");$("#sessionResultColumn").removeClass("d-md-table-cell")}if(settings.ShowNote){if(settings.ShowNoteOnMobile){$("#noteColumn").removeClass("d-md-table-cell");$("#noteColumn").addClass("d-sm-table-cell")}else{$("#noteColumn").removeClass("d-sm-table-cell");$("#noteColumn").addClass("d-md-table-cell")}}else{$("#noteColumn").removeClass("d-sm-table-cell");$("#noteColumn").removeClass("d-md-table-cell")}}function resultsClassificationShowAndHideColumns(){resultsShowAndHideColumnsCommon(settingsClassification);if(settingsClassification.ShowNextToRemove){$("#nextRemovedColumn").addClass("d-sm-table-cell")}else{$("#nextRemovedColumn").removeClass("d-sm-table-cell")}if(settingsClassification.ShowCounted){$("#countedColumn").addClass("d-sm-table-cell")}else{$("#countedColumn").removeClass("d-sm-table-cell")}}function setResultsLazyCommon(internalResultsPrint){if(settings.ShowRoundsPlayedUpToOrCurrentlyPlayed){if(settings.OnlyOneSessionInStage){$("#currentRoundComma").addClass("d-none");$("#currentRoundSessionText").addClass("d-none");$("#currentRoundSession").addClass("d-none")}else{$("#currentRoundComma").removeClass("d-none");$("#currentRoundSessionText").removeClass("d-none");$("#currentRoundSession").removeClass("d-none")}$("#currentRoundR").removeClass("d-none");$("#currentRoundRound").html(settings.LastPlayedRound.toString());$("#currentRoundSession").html(settings.LastPlayedRoundSession.toString());if(settings.LastPlayedRound===settings.LastFinishedRound&&settings.LastPlayedRoundSession===settings.LastFinishedRoundSession){$("#currentRoundFinishedText").removeClass("d-none");$("#currentRoundRunningText").addClass("d-none")}else{$("#currentRoundFinishedText").addClass("d-none");$("#currentRoundRunningText").removeClass("d-none")}}else{$("#currentRoundR").addClass("d-none")}var resultsJson="./results.json";return $.getJSON(resultsJson).done(function(json){var results=json;var html="";var previousPlace=0;var previousGroup=null;$.each(results.Results,function(index,participantResult){html+=getResultsRow(participantResult,previousPlace,previousGroup,internalResultsPrint);previousPlace=participantResult.Place;previousGroup=participantResult.ParticipantGroup});$("#alertR").addClass("d-none");$("#contentR").removeClass("d-none");$("#rBody").html(html);if(results.PeopleParticipated.length>0){var peopleParticipated=language.peopleParticipated+"<br>";$.each(results.PeopleParticipated,function(index,value){peopleParticipated+=getPlayerHtml(value,true,false,!internalResultsPrint)+", "});peopleParticipated.substring(0,peopleParticipated.length-2);$("#peopleParticipated").html(peopleParticipated);$("#peopleParticipated").removeClass("d-none")}else{$("#peopleParticipated").addClass("d-none")}resultsLoaded=true})["catch"](function(){if(!resultsLoaded){$("#alertR").removeClass("d-none");$("#contentR").addClass("d-none");$("#alertR").html("<div class=\"alert alert-info\" role=\"alert\">"+language.fetchingResultsFailed+"</div>")}})}function setResultsLazy(){resultsShowAndHideColumns();return setResultsLazyCommon(false)}function setInternalResultsLazy(){if(!settings.ShowClassificationPoints)$("#classificationColumn").addClass("d-none");if(!settings.ShowCongressPoints)$("#congressColumn").addClass("d-none");if(!settings.ShowAdjustments)$("#adjustmentColumn").addClass("d-none");if(!settings.ShowCarryOver){$("#carryOverColumn").addClass("d-none");$("#sessionResultColumn").addClass("d-none")}if(!settings.ShowRank)$("#rankColumn").addClass("d-none");if(!settings.ShowInfo||settings.TournamentType===2)$("#infoColumn").addClass("d-none");if(!settings.ShowClubs||settings.TournamentType===2)$("#clubColumn").addClass("d-none");if(!settings.ShowNote)$("#noteColumn").addClass("d-none");if(!settings.ShowFirstAndLastName&&settings.TournamentType!==2)$("#playersColumn").addClass("d-none");if(!settings.ShowBboUsername||settings.TournamentType===2)$("#bboUsernameColumn").addClass("d-none");if(!settings.ShowDistricts||settings.TournamentType===2)$("#districtColumn").addClass("d-none");if(!settings.ShowRewards)$("#rewardColumn").addClass("d-none");if(!settings.ShowRewardsDescriptions)$("#descriptionColumn").addClass("d-none");if(!settings.LiveResults)$("#countedBoardsColumn").addClass("d-none");return setResultsLazyCommon(true)}function nbspIfEmpty(str){if(str.length===0)return"&nbsp";else return str}function getAdjustments(resultPrecision,adjustmentsSum,adjustments){if(adjustmentsSum===0)return"";var adjustmentsToShow=exactlyNPlaces(adjustmentsSum,resultPrecision);var adjustmentsExplained=adjustments.map(function(value){return value.Description+": "+exactlyNPlaces(value.Value,resultPrecision)}).join("<br>");return createToolTipHtml(adjustmentsExplained,adjustmentsToShow)}function cellWithMaybeShowOnMobile(show,showOnMobile,value){var additionalClass=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var textCenter=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;return show?"<td class=\"d-none align-middle ".concat(showOnMobile?"d-sm-table-cell":"d-md-table-cell"," ")+"".concat(textCenter?"text-center":""," ").concat(additionalClass,"\">").concat(value,"</td>"):""}function mediumTableCell(show,value){var additionalClass=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var textCenter=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;return show?"<td class=\"d-none d-md-table-cell align-middle "+"".concat(textCenter?"text-center":""," ").concat(additionalClass,"\">").concat(value,"</td>"):""}function smallTableCell(show,value){var additionalClass=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var textCenter=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;return show?"<td class=\"d-none d-sm-table-cell align-middle "+"".concat(textCenter?"text-center":""," ").concat(additionalClass,"\">").concat(value,"</td>"):""}function internalResultsCell(show,value){var additionalClass=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var textCenter=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;return show?"<td class=\"align-middle ".concat(textCenter?"text-center":"","\">").concat(value,"</td>"):""}function internalResultsMobileCell(show,showMobile,value){var additionalClass=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";var textCenter=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;return internalResultsCell(show,value,additionalClass,textCenter)}function getResultsRow(participantResult,previousPlace,previousGroup,internalResultsPrint){var _participantResult$Re,_participantResult$Re2;var html="";function getPlayerHtmlInternal(player){return getPlayerHtml(player,false,false,!internalResultsPrint)}var participant=participantResult.Participant;var bboUsername;var names;var districts;var clubs;var note;var rank;var info;var peopleToShowTeams=null;switch(settings.TournamentType){case 0:{var middleIfSameOrSplit=function middleIfSameOrSplit(valuePlayer1,valuePlayer2){return valuePlayer1===valuePlayer2?valuePlayer1:nbspIfEmpty(valuePlayer1)+"<br>"+nbspIfEmpty(valuePlayer2)};var player1=participant._person1,player2=participant._person2;registerPlayerToParticipantMapping(player1,participant);registerPlayerToParticipantMapping(player2,participant);names=getPlayerHtmlInternal(player1)+"<br>"+getPlayerHtmlInternal(player2);bboUsername=nbspIfEmpty(player1._bboUsername)+"<br>"+nbspIfEmpty(player2._bboUsername);districts=middleIfSameOrSplit(player1._state,player2._state);clubs=middleIfSameOrSplit(player1._club,player2._club);note=middleIfSameOrSplit(player1._resultNote,player2._resultNote);rank="".concat(nbspIfEmpty(getRank(player1)),"<br>").concat(nbspIfEmpty(getRank(player2)));info="".concat(nbspIfEmpty(personToInfo(player1)),"<br>").concat(nbspIfEmpty(personToInfo(player2)));break}case 1:{var player=participant._person;registerPlayerToParticipantMapping(participant._person,participant);names=getPlayerHtmlInternal(player);bboUsername=player._bboUsername;districts=player._state;clubs=player._club;note=player._resultNote;rank=player._wk;info=personToInfo(player);break}case 2:{note=participant._note;rank=participant._people.reduce(function(sum,player){return sum+player._wk},0);peopleToShowTeams="";participant._people.forEach(function(person){if(person._pid.__type!=="NoPid:#TournamentStructure"){registerPlayerToParticipantMapping(person,participant);var personCode=getPlayerHtml(person,true,true,!internalResultsPrint);peopleToShowTeams+=personCode+", "}});if(peopleToShowTeams!==""&&(settings.ShowFirstAndLastName||settings.ShowBboUsername))peopleToShowTeams=peopleToShowTeams.substring(0,peopleToShowTeams.length-2);names=teamToHtmlWithFlag(participant,false,false,!internalResultsPrint);break}}var clPoints=settings.ShowClassificationPoints?showIfNotZero(participantResult.Reward._classificationPoints):"";var coPoints=settings.ShowCongressPoints?showIfNotZero(participantResult.Reward._congressPoints):"";var adjustments=settings.ShowAdjustments?!internalResultsPrint?getAdjustments(settings.ResultsPresentationPrecision,participantResult.AdjustmentsSum,participantResult.ParticipantAdjustments):showIfNotZero(participantResult.AdjustmentsSum):"";var carryOver=settings.ShowCarryOver&&participantResult.CarryOverSum!==0?exactlyNPlaces(participantResult.CarryOverSum,settings.ResultsPresentationPrecision):"";var sessionSum=settings.ShowCarryOver?exactlyNPlaces(participantResult.SessionSum,settings.ResultsPresentationPrecision):"";var place=participantResult.Place===previousPlace&&participantResult.ParticipantGroup===previousGroup?"":participantResult.Place;var placeCell="<td class=\"align-middle text-center\">".concat(place,"</td>");var namesCell=settings.ShowFirstAndLastName||settings.TournamentType===2?"<td class=\"".concat(internalResultsPrint?"":"might-be-long-cell","\">")+names+"</td>":"";var mediumTableCellOrInternal=internalResultsPrint?internalResultsCell:mediumTableCell;var smallTableCellOrInternal=internalResultsPrint?internalResultsCell:smallTableCell;var cellWithMaybeShowOnMobileOrInternal=internalResultsPrint?internalResultsMobileCell:cellWithMaybeShowOnMobile;var bboUsernameCell=mediumTableCellOrInternal(settings.ShowBboUsername&&settings.TournamentType!==2,bboUsername);var districtsCell=cellWithMaybeShowOnMobileOrInternal(settings.ShowDistricts&&settings.TournamentType!==2,settings.ShowDistrictsOnMobile,districts);var rankCell=cellWithMaybeShowOnMobileOrInternal(settings.ShowRank,settings.ShowRankOnMobile,rank);var infoCell=cellWithMaybeShowOnMobileOrInternal(settings.ShowInfo&&settings.TournamentType!==2,settings.ShowInfoOnMobile,info);var clubCell=mediumTableCellOrInternal(settings.ShowClubs&&settings.TournamentType!==2,clubs,"might-be-long-cell",false);var noteCell=cellWithMaybeShowOnMobileOrInternal(settings.ShowNote,settings.ShowNoteOnMobile,note,"might-be-long-cell",false);var carryOverCell=smallTableCellOrInternal(settings.ShowCarryOver,carryOver);var adjustmentsCell=smallTableCellOrInternal(settings.ShowAdjustments,adjustments);var sessionSumCell=mediumTableCellOrInternal(settings.ShowCarryOver,sessionSum);var classificationPointsCell=smallTableCellOrInternal(settings.ShowClassificationPoints,clPoints);var congressPointsCell=smallTableCellOrInternal(settings.ShowCongressPoints,coPoints);var rewardDescriptionCell=mediumTableCellOrInternal(settings.ShowRewardsDescriptions,(_participantResult$Re=participantResult.Reward)===null||_participantResult$Re===void 0?void 0:_participantResult$Re._description);var rewardCell=mediumTableCellOrInternal(settings.ShowRewards,(_participantResult$Re2=participantResult.Reward)===null||_participantResult$Re2===void 0?void 0:_participantResult$Re2._reward);var countedBoardsCell=settings.LiveResults?"<td class=\"align-middle text-center small\">".concat(participantResult.CountedBoards,"</td>"):"";var teamsNames=settings.TeamsShowNames&&peopleToShowTeams!==""?"<tr><td colspan=\"2\"></td><td class=\"align-middle text-left\" colspan=\"100\">".concat(peopleToShowTeams,"</td></tr>"):"";if(participantResult.ParticipantGroup!==previousGroup){html+="<tr><td class=\"align-middle text-center\" colspan=\"100\"><b>"+(participantResult.ParticipantGroup===null?"":participantResult.ParticipantGroup)+"</b></td></tr>"}var numberCell="<td class=\"align-middle text-center\">"+(!internalResultsPrint?participantNumberLink(participant.Number.toString(),participant.Number):participant.Number.toString())+"</td>";html+="<tr data-participants=\"|".concat(participant.Number,"|\">")+placeCell+numberCell+namesCell+bboUsernameCell+districtsCell+rankCell+infoCell+clubCell+noteCell+carryOverCell+adjustmentsCell+sessionSumCell+"<td class=\"text-center align-middle\">"+exactlyNPlaces(participantResult.Result._pointsDecimal,settings.ResultsPresentationPrecision)+"</td>"+classificationPointsCell+congressPointsCell+rewardDescriptionCell+rewardCell+countedBoardsCell+"</tr>"+teamsNames;return html}function loadResultsClassification(){var resultsJson="./results.json";resultsClassificationShowAndHideColumns();return $.getJSON(resultsJson).done(function(json){var results=json;var html="";var previousPlace=0;$.each(results.Results,function(index,resultRow){var _getResultRowClassifi=getResultRowClassification(resultRow,previousPlace),_getResultRowClassifi2=_slicedToArray(_getResultRowClassifi,2),resultsRow=_getResultRowClassifi2[0],previousP=_getResultRowClassifi2[1];html+=resultsRow;previousPlace=previousP});$(".tournamentColumnHeader").remove();$.each(results.Tournaments,function(index,classificationTournament){$("#iThL").find("th").eq(7+index).after("<th scope=\"col\" class=\"tournamentColumnHeader align-middle text-center\">"+(classificationTournament.HttpLink!==null?"<a href=\"".concat(classificationTournament.HttpLink,"\">"):"")+(settingsClassification.MultipleTournamentGroupsPresent?createToolTipHtml(classificationTournament.GroupName,classificationTournament.Name):classificationTournament.Name)+(classificationTournament.HttpLink!==null?"</a>":"")+"</th>")});$("#alertR").addClass("d-none");$("#contentR").removeClass("d-none");clearTooltips();$("#rBody").html(html);activateTooltips();if(!resultsLoaded){onResizeClassification();resultsLoaded=true}})["catch"](function(){if(!resultsLoaded){document.getElementById("alertR").classList.remove("d-none");document.getElementById("contentR").classList.add("d-none");$("#alertR").html("<div class=\"alert alert-info\" role=\"alert\">"+language.fetchingResultsFailed+"</div>")}})}function getResultRowClassification(resultRow,previousPlace){var names=settingsClassification.ResultsUseGrouping?resultRow.Group:getPlayerHtml(resultRow.Person);var tournaments=getTournamentsCellsClassification(resultRow.Tournaments);var nextToRemove="";if(settingsClassification.ShowNextToRemove){$.each(resultRow.NextToRemove,function(index,value){if(index!==0)nextToRemove+=", ";if(settingsClassification.MultipleTournamentGroupsPresent)nextToRemove+=createToolTipHtml(value.Key,atMostTwoPlaces(value.Value).toString());else nextToRemove+=atMostTwoPlaces(value.Value)})}var namesCell=settingsClassification.ShowFirstAndLastName?"<td class=\"might-be-long-cell350\">".concat(names,"</td>"):"";var nextToRemoveCell=settingsClassification.ShowNextToRemove?"<td class=\"align-middle text-center font-weight-bold d-none d-sm-table-cell text-nowrap\">"+"".concat(nextToRemove,"</td>"):"";var clPoints=settingsClassification.ShowClassificationPoints?showIfNotZero(resultRow.Reward._classificationPoints):"";var coPoints=settingsClassification.ShowCongressPoints?showIfNotZero(resultRow.Reward._congressPoints):"";var playerDetailsCells="";if(!settingsClassification.ResultsUseGrouping){playerDetailsCells=mediumTableCell(settingsClassification.ShowBboUsername,resultRow.Person._bboUsername)+cellWithMaybeShowOnMobile(settingsClassification.ShowDistricts,settingsClassification.ShowDistrictsOnMobile,resultRow.Person._state)+cellWithMaybeShowOnMobile(settingsClassification.ShowRank,settingsClassification.ShowRankOnMobile,resultRow.Person._wk.toString())+cellWithMaybeShowOnMobile(settingsClassification.ShowInfo,settingsClassification.ShowInfoOnMobile,personToInfo(resultRow.Person))+mediumTableCell(settingsClassification.ShowClubs,resultRow.Person._club,"might-be-long-cell250")}var resultsRow="<tr>"+"<td class=\"align-middle text-center\">".concat(resultRow.Place===previousPlace?"":resultRow.Place.toString(),"</td>")+namesCell+playerDetailsCells+"<td class=\"align-middle text-center font-weight-bold\">".concat(atMostTwoPlaces(resultRow.Points),"</td>")+tournaments+nextToRemoveCell+(settingsClassification.ShowCounted?"<td class=\"align-middle text-center font-weight-bold d-none d-sm-table-cell\">".concat(resultRow.PlayedTournaments,"</td>"):"")+smallTableCell(settingsClassification.ShowClassificationPoints,clPoints)+smallTableCell(settingsClassification.ShowCongressPoints,coPoints)+mediumTableCell(settingsClassification.ShowRewardsDescriptions,resultRow.Reward._description)+mediumTableCell(settingsClassification.ShowRewards,resultRow.Reward._reward)+"</tr>";previousPlace=resultRow.Place;return[resultsRow,previousPlace]}function getTournamentsCellsClassification(tournaments){var result="";$.each(tournaments,function(index,value){var content="";if(value!==null){var del=!value.Counted?"<del>":"";var delEnd=!value.Counted?"</del>":"";content=del+atMostTwoPlaces(value.Points)+delEnd;if(value.PeopleGainingPoints!==null){var peopleGainingPoints=$.map(value.PeopleGainingPoints,function(value){return"".concat(value.Item1,": ").concat(atMostTwoPlaces(value.Item2))}).join("<br>");content=createToolTipHtml(peopleGainingPoints,content)}}result+="<td class=\"align-middle text-center\">".concat(content,"</td>")});return result}
"use strict";function loadVpTable(){if(!settings.ShowVpTable){$("#vpTableLink").addClass("d-none");$("#vpTableLinkHL").addClass("d-none");$("#vpTableLinkHS").addClass("d-none");return $.when()}$("#vpTableLink").removeClass("d-none");$("#vpTableLinkHL").removeClass("d-none");$("#vpTableLinkHS").removeClass("d-none");var vpJson="./vp.json";return $.getJSON(vpJson).done(function(json){var vpTable=json;var vpTableRows1="";var vpTableRows2="";var vpLength=vpTable.length;for(var i=0;i<((vpLength+1)/2|2);i++){vpTableRows1+="<tr><td class=\"align-middle text-center\">".concat(i,"</td>")+"<td class=\"align-middle text-center\">".concat(vpTable[i],"</td></tr>")};for(var _i=(vpLength+1)/2|2;_i<vpLength;_i++){vpTableRows2+="<tr><td class=\"align-middle text-center\">".concat(_i+(vpLength-1===_i?"+":""),"</td>")+"<td class=\"align-middle text-center\">".concat(vpTable[_i],"</td></tr>")};$("#contentVpBody1").html(vpTableRows1);$("#contentVpBody2").html(vpTableRows2)})["catch"](function(){})}
"use strict";$(document).ready(function(){$(function(){$("#gotoSimpler").remove()});$.ajaxSetup({cache:false});setUpSendFormOnEnter();window.onhashchange=function(){onHashChange()};loadSettings().then(function(){return $.when(loadStages(),setLanguage(null))}).then(function(){if(settings.LiveResults){$("#liveResults").removeClass("d-none");$("#countedBoardsColumn").removeClass("d-none");refreshPeriodically()}else{$("#liveResults").addClass("d-none");$("#countedBoardsColumn").addClass("d-none")}loadVpTable();initResizeObserver();onHashChange()})});function onHashChange(){setHashFromWindowHash();updateLinksLeftTab();updateButtonsLeftTab();setNavBarActive();afterHashChanged()}function refreshPeriodically(){setTimeout(function(){loadSettings().then(function(){return loadPanels()}).then(function(){return refreshPeriodically()})},settings.RefreshEverySeconds*1000)}function afterHashChanged(){highlightFollowed();loadPanels()}function setVisiblePanel(){$.each($(".leftTab"),function(index,value){value.classList.remove("d-xl-block");value.classList.add("d-none")});$("#tab".concat(hashData.mobileView)).removeClass("d-none");if(hashData.mobileView===MobileView.Board){$("#tab".concat(hashData.leftView)).addClass("d-xl-block")}else{$("#tabB").addClass("d-xl-block")}}function loadPanels(){clearTooltips();showOrHideButtons();setVisiblePanel();setTdData(settings);var resultsPromise=setResultsLazy();var histPromise=setPrivateScoreContentLazy();var roundResultsPromise=setRoundContentLazy();var segmentResultsAndProtocolPromise=setSegmentResultsLazy().then(function(){return setProtocolContentLazy(null,settings,true)});var butlerPromise=setIndividualClassificationContentLazy();var butlerFromSegmentPromise=setIndividualClassificationFromSegmentContentLazy();var crossTablePromise=setCrossTableContent();return $.when(resultsPromise,histPromise,roundResultsPromise,segmentResultsAndProtocolPromise,butlerPromise,butlerFromSegmentPromise,crossTablePromise).then(function(){return onPanelsLoaded()},function(){return onPanelsLoaded()})}function onPanelsLoaded(){$("tr[data-participants*='|".concat(hashData.followed,"|']")).addClass("table-primary");updateLinks();$.when(greyOutScoringGroups()).then(function(){return activateTooltips()},function(){return activateTooltips()});if(justStartedFollowing){justStartedFollowing=false;safeScroll()}else{if(hashData.mobileView===MobileView.Results&&hashData.leftView===LeftView.Results&&hashData.followed!==0&&isElementInViewport($("#contentR tr[data-participants*='|".concat(hashData.followed,"|']"))[0])){safeScroll()}}}function safeScroll(){var offset=$("#contentR tr[data-participants*='|".concat(hashData.followed,"|']")).offset().top-$(window).height()/2+$("#contentR tr[data-participants*='|".concat(hashData.followed,"|']")).height()/2;offset=Math.max(offset,0);var whereToScroll=offset+"px";$("html, body").animate({scrollTop:whereToScroll})}
